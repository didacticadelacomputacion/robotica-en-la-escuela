!function(){me.debug=me.debug||{};var e=me.Object.extend({init:function(e){this.stats={},this.reset(e)},reset:function(e){var t=this;(e||Object.keys(this.stats)).forEach(function(e){t.stats[e]=0})},inc:function(e,t){this.stats[e]+=t||1},get:function(e){return this.stats[e]}}),t=me.Renderable.extend({init:function(t,i){this._super(me.Renderable,"init",[0,0,me.game.viewport.width,70]),this.version="3.1.0",this.area={},this.counters=new e(["shapes","sprites","velocity","bounds","children"]),this.sensors={front:0,left:0,right:0},this.robotPos={x:0,y:0},this.pos.z=1/0,this.visible=!1,this.frameUpdateTime=0,this.frameDrawTime=0,this.GUID="debug-"+me.utils.createGUID(),this.name="me.debugPanel",this.isPersistent=!0,this.floating=!0,this.isRenderable=!0,this.alwaysUpdate=!0,this.canvas=me.video.createCanvas(this.width,this.height,!0),this.font_size=10,this.mod=1,this.width<500&&(this.font_size=7,this.mod=.7),this.font=new me.Font("courier",this.font_size,"white");var s=12*this.mod;this.area.renderHitBox=new me.Rect(163,5,s,s),this.area.renderVelocity=new me.Rect(163,20,s,s),this.area.renderQuadTree=new me.Rect(253,5,s,s),this.help_str="(s)how/(h)ide",this.help_str_len=this.font.measureText(me.video.renderer,this.help_str).width,this.fps_str_len=this.font.measureText(me.video.renderer,"00/00 fps").width,this.memoryPositionX=400*this.mod,me.debug.displayFPS=!0,me.input.bindKey(t||me.input.KEY.S,"show",!1,!1),me.input.bindKey(i||me.input.KEY.H,"hide",!1,!1);var o=this;this.keyHandler=me.event.subscribe(me.event.KEYDOWN,function(e){"show"===e?o.show():"hide"===e&&o.hide()}),me.event.subscribe(me.event.VIEWPORT_ONRESIZE,function(e){o.resize(e,70)}),this.patchSystemFn()},patchSystemFn:function(){me.debug.renderHitBox=me.debug.renderHitBox||me.game.HASH.hitbox||!1,me.debug.renderVelocity=me.debug.renderVelocity||me.game.HASH.velocity||!1,me.debug.renderQuadTree=me.debug.renderQuadTree||me.game.HASH.quadtree||!1;var e=this,t=new me.Rect(0,0,0,0);me.plugin.patch(me.timer,"update",function(e){this._patched(e),me.timer.countFPS()}),me.plugin.patch(me.game,"update",function(t){var i=window.performance.now();this._patched(t),e.frameUpdateTime=window.performance.now()-i}),me.plugin.patch(me.game,"draw",function(){var t=window.performance.now();e.counters.reset(),this._patched(),e.frameDrawTime=window.performance.now()-t}),me.plugin.patch(me.Sprite,"draw",function(t){if(this._patched(t),me.debug.renderHitBox){var i=-this.anchorPoint.x*this.width,s=-this.anchorPoint.y*this.height;t.save(),t.setColor("green"),t.translate(i,s),t.strokeRect(this.left,this.top,this.width,this.height),e.counters.inc("sprites"),t.restore()}}),me.plugin.patch(me.Entity,"draw",function(i){if(this._patched(i),me.debug.renderHitBox){i.save(),i.setLineWidth(1),i.setColor("orange"),t.copy(this.getBounds()),t.pos.sub(this.ancestor._absPos),i.drawShape(t),e.counters.inc("bounds"),i.setColor("red"),i.translate(this.pos.x,this.pos.y);for(var s,o=this.body.shapes.length;o--,s=this.body.shapes[o];)i.drawShape(s),e.counters.inc("shapes");i.restore()}if(me.debug.renderVelocity&&(this.body.vel.x||this.body.vel.y)){t.copy(this.getBounds()),t.pos.sub(this.ancestor._absPos);var n=~~(t.pos.x+t.width/2),r=~~(t.pos.y+t.height/2);i.save(),i.setLineWidth(1),i.setColor("blue"),i.translate(n,r),i.strokeLine(0,0,~~(this.body.vel.x*(t.width/2)),~~(this.body.vel.y*(t.height/2))),e.counters.inc("velocity"),i.restore()}}),me.plugin.patch(me.Entity,"update",function(t){this._patched(t),void 0!==this.sensors&&(e.sensors.left=this.sensors.left,e.sensors.right=this.sensors.right,e.sensors.front=this.sensors.front,e.robotPos.x=Math.round(this.pos.x),e.robotPos.y=Math.round(this.pos.y))}),me.plugin.patch(me.Container,"draw",function(i,s){this._patched(i,s),me.debug.renderHitBox&&(i.save(),i.setLineWidth(1),i.setColor("orange"),t.copy(this.getBounds()),this.ancestor&&t.pos.sub(this.ancestor._absPos),i.drawShape(t),e.counters.inc("bounds"),i.setColor("purple"),t.copy(this.childBounds),this.ancestor&&t.pos.sub(this.ancestor._absPos),i.drawShape(t),e.counters.inc("children"),i.restore())})},show:function(){this.visible||(me.input.registerPointerEvent("pointerdown",this,this.onClick.bind(this)),me.game.world.addChild(this,1/0),this.visible=!0,me.game.repaint())},hide:function(){this.visible&&(this.canvas.removeEventListener("click",this.onClick.bind(this)),me.game.world.removeChild(this),this.visible=!1,me.game.repaint())},update:function(){return me.input.isKeyPressed("show")?this.show():me.input.isKeyPressed("hide")&&this.hide(),!0},onClick:function(e){this.area.renderHitBox.containsPoint(e.gameX,e.gameY)?me.debug.renderHitBox=!me.debug.renderHitBox:this.area.renderVelocity.containsPoint(e.gameX,e.gameY)?me.debug.renderVelocity=!me.debug.renderVelocity:this.area.renderQuadTree.containsPoint(e.gameX,e.gameY)&&(me.debug.renderQuadTree=!me.debug.renderQuadTree),me.game.repaint()},drawQuadTreeNode:function(e,t){var i=t.bounds;if(0===t.nodes.length){var s=.4*t.objects.length/me.collision.maxChildren;s>0&&(e.save(),e.setColor("rgba(255,0,0,"+s+")"),e.fillRect(i.pos.x,i.pos.y,i.width,i.height),e.restore())}else for(var o=0;o<t.nodes.length;o++)this.drawQuadTreeNode(e,t.nodes[o])},drawQuadTree:function(e){var t=e.globalAlpha(),i=me.game.viewport.pos.x,s=me.game.viewport.pos.y;e.translate(-i,-s),this.drawQuadTreeNode(e,me.collision.quadTree),e.translate(i,s),e.setGlobalAlpha(t)},drawMemoryGraph:function(e,t){if(window.performance&&window.performance.memory){var i=Number.prototype.round(window.performance.memory.usedJSHeapSize/1048576,2),s=Number.prototype.round(window.performance.memory.totalJSHeapSize/1048576,2),o=~~(t-this.memoryPositionX-5),n=o*(i/s);e.setColor("#0065AD"),e.fillRect(this.memoryPositionX,0,o,20),e.setColor("#3AA4F0"),e.fillRect(this.memoryPositionX+1,1,n-1,17),this.font.draw(e,"Heap : "+i+"/"+s+" MB",this.memoryPositionX+5,5*this.mod)}else this.font.draw(e,"Heap : ??/?? MB",this.memoryPositionX,5*this.mod)},draw:function(e){e.save(),!0===me.debug.renderQuadTree&&this.drawQuadTree(e),e.setGlobalAlpha(.5),e.setColor("black"),e.fillRect(this.left,this.top,this.width,this.height),e.setGlobalAlpha(1),this.font.draw(e,"#objects : "+me.game.world.children.length,5*this.mod,5*this.mod),this.font.draw(e,"#draws   : "+me.game.world.drawCount,5*this.mod,20*this.mod),this.font.draw(e,"?hitbox   ["+(me.debug.renderHitBox?"x":" ")+"]",100*this.mod,5*this.mod),this.font.draw(e,"?velocity ["+(me.debug.renderVelocity?"x":" ")+"]",100*this.mod,20*this.mod),this.font.draw(e,"?QuadTree ["+(me.debug.renderQuadTree?"x":" ")+"]",190*this.mod,5*this.mod),this.font.draw(e,"Update : "+this.frameUpdateTime.toFixed(2)+" ms",285*this.mod,5*this.mod),this.font.draw(e,"Draw   : "+this.frameDrawTime.toFixed(2)+" ms",285*this.mod,20*this.mod),this.font.fillStyle.copy("red"),this.font.draw(e,"Shapes   : "+this.counters.get("shapes"),5*this.mod,35*this.mod),this.font.fillStyle.copy("green"),this.font.draw(e,"Sprites   : "+this.counters.get("sprites"),100*this.mod,35*this.mod),this.font.fillStyle.copy("blue"),this.font.draw(e,"Velocity  : "+this.counters.get("velocity"),190*this.mod,35*this.mod),this.font.fillStyle.copy("orange"),this.font.draw(e,"Bounds : "+this.counters.get("bounds"),285*this.mod,35*this.mod),this.font.fillStyle.copy("purple"),this.font.draw(e,"Children : "+this.counters.get("children"),400*this.mod,35*this.mod),this.font.setFont("courier",this.font_size,"white"),this.font.draw(e,"Front sensor: "+this.sensors.front,5*this.mod,50*this.mod),this.font.draw(e,"Left sensor: "+this.sensors.left,130*this.mod,50*this.mod),this.font.draw(e,"Right sensor: "+this.sensors.right,260*this.mod,50*this.mod),this.font.draw(e,"Robot pos: ("+this.robotPos.x+", "+this.robotPos.y+")",390*this.mod,50*this.mod);var t=this.width-25;this.drawMemoryGraph(e,t-this.help_str_len),this.font.draw(e,this.help_str,t-this.help_str_len,20*this.mod);var i=me.timer.fps+"/"+me.sys.fps+" fps";this.font.draw(e,i,this.width-this.fps_str_len-5,5*this.mod),e.restore()},onDestroyEvent:function(){this.hide(),me.input.unbindKey(me.input.KEY.S),me.input.unbindKey(me.input.KEY.H),me.event.unsubscribe(this.keyHandler)}});me.debug.Panel=me.plugin.Base.extend({init:function(e,i){this._super(me.plugin.Base,"init"),new t(e,i).show()}})}(),me.Line=me.Line.extend({intersection:function(e){var t=e.points[0].x+e.pos.x,i=e.points[0].y+e.pos.y,s=e.points[1].x+e.pos.x,o=e.points[1].y+e.pos.y,n=this.points[0].x+this.pos.x,r=this.points[0].y+this.pos.y,h=this.points[1].x+this.pos.x,a=this.points[1].y+this.pos.y,d=(o-i)*(h-n)-(s-t)*(a-r);if(0==d)return null;new me.Vector2d;var m=r-i,l=n-t,p=(h-n)*m-(a-r)*l;if(m=((s-t)*m-(o-i)*l)/d,(l=p/d)>0&&l<1&&m>0&&m<1){var u=n+m*(h-n),c=r+m*(a-r);return me.pool.pull("vector",u,c)}return null}}),me.Body=me.Body.extend({getEdgesAsLines:function(){var e=[];if(2==this.points.length)return[me.pool.pull("line",0,0,[this.points[0],this.points[1]])];for(var t=0;t<this.points.length;t++)t<this.points.length-1?e.push(me.pool.pull("line",0,0,[this.points[t],this.points[t+1]])):e.push(me.pool.pull("line",0,0,[this.points[t],this.points[0]]));return e}}),me.Entity=me.Entity.extend({getBodyEdgesAsLines:function(){for(var e=this.body.getEdgesAsLines(),t=0;t<e.length;t++)e[t].pos.x+=this.pos.x,e[t].pos.y+=this.pos.y;return e}});var game={onload:function(e){me.execution={state:2,run:function(){this.state=0},pause:function(){this.state=1},finish:function(){this.state=2},isRunning:function(){return 0==this.state},isPaused:function(){return 1==this.state},hasFinished:function(){return 2==this.state}},me.game.changeMap=function(e){me.game.map=e,me.state.pause(),me.state.change(me.state.PLAY),me.state.resume()},me.video.init(640,640,{wrapper:e,antiAlias:!0})?(me.game.HASH.debug&&window.onReady(function(){me.plugin.register.defer(this,me.debug.Panel,"debug",me.input.KEY.V)}),me.game.HUD={HUDContainer:null,enabled:!1,enableHUD:function(){this.enabled=!0;var e=me.game.world.getChildByProp("name","robot")[0];this.HUDContainer=me.pool.pull("HUDContainer",e),me.game.world.addChild(this.HUDContainer)},disableHUD:function(){this.enabled=!1,me.game.world.removeChild(this.HUDContainer)}},me.loader.onload=this.loaded.bind(this),me.loader.preload(game.resources),me.state.set(me.state.LOADING,new game.CustomLoadingScreen),me.state.change(me.state.LOADING)):alert("Your browser does not support HTML5 canvas.")},loaded:function(){me.game.map="area03",me.state.set(me.state.PLAY,new game.PlayScreen),me.pool.register("mainPlayer",game.PlayerEntity),me.pool.register("HUDContainer",game.HUD.Container,!0),me.pool.register("HUDBackground",game.HUD.Background,!0),me.pool.register("HUDRobotPosition",game.HUD.RobotPosition,!0),me.pool.register("HUDRobotSensors",game.HUD.RobotSensors,!0),me.pool.register("HUDRobotShapes",game.HUD.RobotShapes,!0),me.pool.register("worldEntity",game.WorldFrameEntity),me.pool.register("line",me.Line,!0),me.pool.register("vector",me.Vector2d,!0),me.state.change(me.state.PLAY)}};game.HUD=game.HUD||{},game.HUD.Container=me.Container.extend({init:function(e){this._super(me.Container,"init"),this.floating=!0,this.z=1/0,this.name="HUD",this.robotEntity=e,this.addChild(me.pool.pull("HUDBackground",0,0,me.game.viewport.width,50)),this.addChild(me.pool.pull("HUDRobotPosition",10,5,this.robotEntity.pos)),this.addChild(me.pool.pull("HUDRobotSensors",10,25,this.robotEntity.sensors)),this.addChild(me.pool.pull("HUDRobotShapes",this.robotEntity))}}),game.HUD.RobotSensors=me.Renderable.extend({init:function(e,t,i){this._super(me.Renderable,"init",[e,t,10,10]),this.sensors=i,this.font=new me.Font("courier",14,"white")},update:function(){return!0},draw:function(e){this.font.draw(e,"Sensor izquierdo: "+this.sensors.left,this.pos.x,this.pos.y),this.font.draw(e,"Sensor derecho: "+this.sensors.right,this.pos.x+240,this.pos.y),this.font.draw(e,"Sensor frontal: "+this.sensors.front,this.pos.x+460,this.pos.y)}}),game.HUD.RobotPosition=me.Renderable.extend({init:function(e,t,i){this._super(me.Renderable,"init",[e,t,10,10]),this.robotPosition=i,this.localRobotPosition={x:0,y:0},this.font=new me.Font("courier",14,"white")},update:function(){return(this.robotPosition.x!=this.localRobotPosition.x||this.robotPosition.y!=this.localRobotPosition.y)&&(this.localRobotPosition.x=Math.round(this.robotPosition.x),this.localRobotPosition.y=Math.round(this.robotPosition.y),!0)},draw:function(e){var t="Posición del robot: ("+this.localRobotPosition.x+", "+this.localRobotPosition.y+")";this.font.draw(e,t,this.pos.x+2,this.pos.y)}}),game.HUD.RobotShapes=me.Renderable.extend({init:function(e){this._super(me.Renderable,"init",[e.pos.x,e.pos.y,10,10]),this.localRobotPosition={x:0,y:0,angle:0},this.robotEntity=e},update:function(){return(this.localRobotPosition.x!=this.robotEntity.pos.x||this.localRobotPosition.y!=this.robotEntity.pos.y||this.localRobotPosition.angle!=this.robotEntity.renderable.angle)&&(this.localRobotPosition.x=this.robotEntity.pos.x,this.localRobotPosition.y=this.robotEntity.pos.y,this.localRobotPosition.angle=this.robotEntity.renderable.angle,!0)},draw:function(e){e.save(),e.setLineWidth(1.5),e.setColor("red"),e.translate(this.localRobotPosition.x-me.game.viewport.pos.x,this.localRobotPosition.y-me.game.viewport.pos.y);for(var t,i=this.robotEntity.body.shapes.length-1;i--,t=this.robotEntity.body.shapes[i];)e.drawShape(t);e.restore()}}),game.HUD.Background=me.Renderable.extend({init:function(e,t,i,s){this._super(me.Renderable,"init",[e,t,i,s]),this.width=i,this.height=s},draw:function(e){e.setGlobalAlpha(.5),e.setColor("black"),e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.setGlobalAlpha(1)}}),game.PlayerEntity=me.Entity.extend({init:function(e,t,i){i.name="robot",this._super(me.Entity,"init",[e,t,i]),this.renderable.width=this.width,this.renderable.height=this.height;var s=me.levelDirector.getCurrentLevel();this.currentLevelWidth=s.cols*s.tilewidth,this.currentLevelHeight=s.rows*s.tileheight,this.tracer={enabled:!1},this.traceCanvas=me.video.createCanvas(this.currentLevelWidth,this.currentLevelHeight,!0),this.traceCanvas.getContext("2d").clearRect(0,0,this.currentLevelWidth,this.currentLevelHeight),this.traceRenderer=new me.CanvasRenderer(this.traceCanvas,me.game.viewport.width,me.game.viewport.height),this.traceRenderer.setColor("#000000"),me.game.viewport.follow(this.pos,me.game.viewport.AXIS.BOTH),this.alwaysUpdate=!0,this.renderable.addAnimation("unique",[0]),this.renderable.setCurrentAnimation("unique"),this.maxX=this.currentLevelWidth-this.width/2-.1,this.maxY=this.currentLevelHeight-this.height/2-.1,this.minX=this.width/2,this.minY=this.height/2,this.sensorRange=50,this.sensors={front:this.sensorRange,left:this.sensorRange,right:this.sensorRange},this.body.shapes[0]=new me.Ellipse(0,0,this.width,this.width),this.body.shapes[1]=new me.Line(0,this.width/2,[new me.Vector2d(0,0),new me.Vector2d(0,this.sensorRange)]),this.body.shapes[2]=new me.Line(0,-this.width/2,[new me.Vector2d(0,0),new me.Vector2d(0,-this.sensorRange)]),this.body.shapes[3]=new me.Line(this.width/2,0,[new me.Vector2d(0,0),new me.Vector2d(this.sensorRange,0)]),this.body.shapes[4]=new me.Line(-this.width/2,0,[new me.Vector2d(0,0),new me.Vector2d(-this.sensorRange,0)]),this.body.updateBounds(),this.l=30,this.wheelRadious=5,this.maxAngularVel=16*Math.PI,this.minAngularVel=-16*Math.PI,this.maxNumericalVelocity=100,this.minNumericalVelocity=-100,this.firstUpdate=!0},mapValue:function(e,t,i,s,o){return(e-s)*(i-t)/(o-s)+t},moveRobot:function(e,t,s){e=s*this.mapValue(e,this.minAngularVel,this.maxAngularVel,this.minNumericalVelocity,this.maxNumericalVelocity),t=s*this.mapValue(t,this.minAngularVel,this.maxAngularVel,this.minNumericalVelocity,this.maxNumericalVelocity);var o=this.wheelRadious/this.l*(e-t);for(this.pos.x+=this.wheelRadious/2*(e+t)*Math.cos(this.renderable.angle),this.pos.y+=this.wheelRadious/2*(e+t)*Math.sin(this.renderable.angle),this.renderable.angle+=o,i=1;i<this.body.shapes.length;i++)this.body.shapes[i].rotate(o),old_x=this.body.shapes[i].pos.x,old_y=this.body.shapes[i].pos.y,this.body.shapes[i].pos.x=Math.cos(o)*(old_x-0)-Math.sin(o)*(old_y-0)+0,this.body.shapes[i].pos.y=Math.sin(o)*(old_x-0)+Math.cos(o)*(old_y-0)+0},draw:function(e){this.tracer.enabled&&this.traceRenderer.fillArc(this.pos.x,this.pos.y-6,6,0,2*Math.PI),e.drawImage(this.traceCanvas,0,0),this._super(me.Entity,"draw",[e])},update:function(e){if(this._super(me.Entity,"update",[e]),this.firstUpdate&&(me.collision.check(this),this.firstUpdate=!1),null!==me.interpreter&&!me.execution.hasFinished()){if(me.interpreter.robotInstructions.length<1e3)for(var t=0;t<10;t++)if(!1===me.interpreter.step()&&0===me.interpreter.robotInstructions.length){me.execution.finish(),me.execution.onCompleted();break}if(me.interpreter.robotInstructions.length>0&&me.interpreter.robotInstructions.length>0&&!me.execution.isPaused()){var i=me.interpreter.robotInstructions[0];switch(i.action){case"motor":i.duration;var s=i.leftWheel,o=i.rightWheel;this.moveRobot(s,o,e/1e3),i.duration-=e/1e3,i.duration<=0&&me.interpreter.robotInstructions.shift();break;case"tracer_status":this.tracer.enabled=i.enabled.data,me.interpreter.robotInstructions.shift();break;case"tracer_colour":this.traceRenderer.setColor(i.colour.data),me.interpreter.robotInstructions.shift();break;case"sensor":i.sensorResultCallback(me.interpreter.createPrimitive(this.sensors[i.sensorName.data])),me.interpreter.robotInstructions.shift()}}}return this.sensors.left=this.sensorRange,this.sensors.right=this.sensorRange,this.sensors.front=this.sensorRange,this.pos.x<=this.minX?this.pos.x=this.minX:this.pos.x>=this.maxX&&(this.pos.x=this.maxX),this.pos.y<=this.minY?this.pos.y=this.minY+.1:this.pos.y>=this.maxY&&(this.pos.y=this.maxY),me.collision.check(this),!0},onCollision:function(e){if(0===e.indexShapeA||void 0===e.indexShapeA)return this.pos.sub(e.overlapV),!0;for(var t=me.pool.pull("line",e.a.body.shapes[e.indexShapeA].pos.x+e.a.pos.x,e.a.body.shapes[e.indexShapeA].pos.y+e.a.pos.y,[e.a.body.shapes[e.indexShapeA].points[0],e.a.body.shapes[e.indexShapeA].points[1]]),i=me.pool.pull("vector",t.pos.x,t.pos.y),s=e.b.getBodyEdgesAsLines(),o=Number.MAX_SAFE_INTEGER,n=0;n<s.length;n++){var r=t.intersection(s[n]);if(me.pool.push(s[n]),null!==r){var h=Math.round(i.distance(r));h<o&&(o=h),me.pool.push(r)}}switch(e.indexShapeA){case 1:e.a.sensors.right=o;break;case 2:e.a.sensors.left=o;break;case 3:e.a.sensors.front=o}return me.pool.push(t),me.pool.push(i),!1}}),game.WorldFrameEntity=me.Entity.extend({init:function(){settings={name:"worldEntity",width:me.game.viewport.width,height:me.game.viewport.height},this._super(me.Entity,"init",[0,0,settings]);var e=me.levelDirector.getCurrentLevel();this.mapWidth=e.cols*e.tilewidth,this.mapHeight=e.rows*e.tileheight,this.body.shapes[0]=new me.Line(0,0,[new me.Vector2d(0,0),new me.Vector2d(this.mapWidth,0)]),this.body.shapes[1]=new me.Line(0,0,[new me.Vector2d(0,0),new me.Vector2d(0,this.mapHeight)]),this.body.shapes[2]=new me.Line(0,0,[new me.Vector2d(this.mapWidth,0),new me.Vector2d(this.mapWidth,this.mapHeight)]),this.body.shapes[3]=new me.Line(0,0,[new me.Vector2d(0,this.mapHeight),new me.Vector2d(this.mapWidth,this.mapHeight)]),this.body.updateBounds()}});var ProgressBar=me.Renderable.extend({init:function(e,t,i){this._super(me.Renderable,"init",[e.x,e.y,t,i]),this.invalidate=!1,this.barHeight=4,this.progress=0},onProgressUpdate:function(e){this.progress=~~(e*this.width),this.invalidate=!0},update:function(){return!0===this.invalidate&&(this.invalidate=!1,!0)},draw:function(e){e.setColor("black"),e.fillRect(0,this.height/2-this.barHeight/2,this.width,this.barHeight),e.setColor("#286090"),e.fillRect(0,this.height/2-this.barHeight/2,this.progress,this.barHeight)}});game.logoScreen=me.Sprite.extend({init:function(e,t){var i=me.loader.getImage("DC_small");this._super(me.Sprite,"init",[e,t-i.height,{image:i}])}}),game.CustomLoadingScreen=me.ScreenObject.extend({onResetEvent:function(){me.game.world.addChild(new me.ColorLayer("background","#FFFFFF",0),0);var e=new ProgressBar(new me.Vector2d,me.video.renderer.getWidth(),me.video.renderer.getHeight()),t=new game.logoScreen(me.game.viewport.width/2,me.game.viewport.height/2);this.loaderHdlr=me.event.subscribe(me.event.LOADER_PROGRESS,e.onProgressUpdate.bind(e)),this.resizeHdlr=me.event.subscribe(me.event.VIEWPORT_ONRESIZE,e.resize.bind(e)),me.game.world.addChild(e,2),me.game.world.addChild(t,1)},onDestroyEvent:function(){me.event.unsubscribe(this.loaderHdlr),me.event.unsubscribe(this.resizeHdlr),this.loaderHdlr=this.resizeHdlr=null}}),game.PlayScreen=me.ScreenObject.extend({onResetEvent:function(){me.levelDirector.loadLevel(me.game.map);var e=me.game.world.getChildByProp("name","robot")[0];me.game.world.addChild(me.pool.pull("worldEntity")),me.game.HUD.enabled&&(me.game.HUD.HUDContainer=me.pool.pull("HUDContainer",e),me.game.world.addChild(me.game.HUD.HUDContainer))},onDestroyEvent:function(){}});
//# sourceMappingURL=../maps/game.min.js.map
