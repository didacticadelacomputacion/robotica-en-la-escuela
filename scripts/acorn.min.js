!function(t,e){"object"==typeof exports&&"object"==typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.acorn||(t.acorn={}))}(this,function(t){"use strict";function e(t){ut=t||{};for(var e in dt)Object.prototype.hasOwnProperty.call(ut,e)||(ut[e]=dt[e]);vt=ut.sourceFile||null}function r(t,e){var r=yt(lt,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=mt,i}function i(t){function e(t){if(1==t.length)return r+="return str === "+JSON.stringify(t[0])+";";r+="switch(str){";for(var e=0;e<t.length;++e)r+="case "+JSON.stringify(t[e])+":";r+="return true}return false;"}t=t.split(" ");var r="",i=[];t:for(o=0;o<t.length;++o){for(var n=0;n<i.length;++n)if(i[n][0].length==t[o].length){i[n].push(t[o]);continue t}i.push([t[o]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),r+="switch(str.length){";for(var o=0;o<i.length;++o){var s=i[o];r+="case "+s[0].length+":",e(s)}r+="}"}else e(t);return new Function("str",r)}function n(){this.line=kt,this.column=mt-Rt}function o(){kt=1,mt=Rt=0,It=!0,c()}function s(t,e){St=mt,ut.locations&&(Nt=new n),bt=t,c(),Pt=e,It=t.beforeExpr}function a(){var t=ut.onComment&&ut.locations&&new n,e=mt,i=lt.indexOf("*/",mt+=2);if(-1===i&&r(mt-2,"Unterminated comment"),mt=i+2,ut.locations){He.lastIndex=e;for(var o;(o=He.exec(lt))&&o.index<mt;)++kt,Rt=o.index+o[0].length}ut.onComment&&ut.onComment(!0,lt.slice(e+2,i),e,mt,t,ut.locations&&new n)}function p(){for(var t=mt,e=ut.onComment&&ut.locations&&new n,r=lt.charCodeAt(mt+=2);mt<ft&&10!==r&&13!==r&&8232!==r&&8233!==r;)++mt,r=lt.charCodeAt(mt);ut.onComment&&ut.onComment(!1,lt.slice(t+2,mt),t,mt,e,ut.locations&&new n)}function c(){for(;mt<ft;){var t=lt.charCodeAt(mt);if(32===t)++mt;else if(13===t)++mt,10===(e=lt.charCodeAt(mt))&&++mt,ut.locations&&(++kt,Rt=mt);else if(10===t||8232===t||8233===t)++mt,ut.locations&&(++kt,Rt=mt);else if(t>8&&t<14)++mt;else if(47===t){var e=lt.charCodeAt(mt+1);if(42===e)a();else{if(47!==e)break;p()}}else if(160===t)++mt;else{if(!(t>=5760&&Je.test(String.fromCharCode(t))))break;++mt}}}function h(){var t=lt.charCodeAt(mt+1);return t>=48&&t<=57?I(!0):(++mt,s(Ee))}function u(){var t=lt.charCodeAt(mt+1);return It?(++mt,N()):61===t?E(Ie,2):E(be,1)}function l(){return 61===lt.charCodeAt(mt+1)?E(Ie,2):E(_e,1)}function f(t){var e=lt.charCodeAt(mt+1);return e===t?E(124===t?xe:Fe,2):61===e?E(Ie,2):E(124===t?Oe:we,1)}function v(){return 61===lt.charCodeAt(mt+1)?E(Ie,2):E(Ce,1)}function d(t){var e=lt.charCodeAt(mt+1);return e===t?45==e&&62==lt.charCodeAt(mt+2)&&We.test(lt.slice(Ft,mt))?(mt+=3,p(),c(),S()):E(ke,2):61===e?E(Ie,2):E(De,1)}function y(t){var e=lt.charCodeAt(mt+1),r=1;return e===t?(r=62===t&&62===lt.charCodeAt(mt+2)?3:2,61===lt.charCodeAt(mt+r)?E(Ie,r+1):E(Ue,r)):33==e&&60==t&&45==lt.charCodeAt(mt+2)&&45==lt.charCodeAt(mt+3)?(mt+=4,p(),c(),S()):(61===e&&(r=61===lt.charCodeAt(mt+2)?3:2),E(Te,r))}function m(t){return 61===lt.charCodeAt(mt+1)?E(Ae,61===lt.charCodeAt(mt+2)?3:2):E(61===t?Pe:Re,1)}function g(t){switch(t){case 46:return h();case 40:return++mt,s(de);case 41:return++mt,s(ye);case 59:return++mt,s(ge);case 44:return++mt,s(me);case 91:return++mt,s(ue);case 93:return++mt,s(le);case 123:return++mt,s(fe);case 125:return++mt,s(ve);case 58:return++mt,s(Se);case 63:return++mt,s(Ne);case 48:var e=lt.charCodeAt(mt+1);if(120===e||88===e)return P();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return I(!1);case 34:case 39:return k(t);case 47:return u(t);case 37:case 42:return l();case 124:case 38:return f(t);case 94:return v();case 43:case 45:return d(t);case 60:case 62:return y(t);case 61:case 33:return m(t);case 126:return E(Re,1)}return!1}function S(t){if(t?mt=gt+1:gt=mt,ut.locations&&(Et=new n),t)return N();if(mt>=ft)return s(Bt);var e=lt.charCodeAt(mt);if($e(e)||92===e)return F();var i=g(e);if(!1===i){var o=String.fromCharCode(e);if("\\"===o||Xe.test(o))return F();r(mt,"Unexpected character '"+o+"'")}return i}function E(t,e){var r=lt.slice(mt,mt+e);mt+=e,s(t,r)}function N(){for(var t,e,i="",n=mt;;){mt>=ft&&r(n,"Unterminated regular expression");var o=lt.charAt(mt);if(We.test(o)&&r(n,"Unterminated regular expression"),t)t=!1;else{if("["===o)e=!0;else if("]"===o&&e)e=!1;else if("/"===o&&!e)break;t="\\"===o}++mt}i=lt.slice(n,mt);++mt;var a=x();return a&&!/^[gmsiy]*$/.test(a)&&r(n,"Invalid regexp flag"),s(Dt,new RegExp(i,a))}function b(t,e){for(var r=mt,i=0,n=0,o=null==e?1/0:e;n<o;++n){var s,a=lt.charCodeAt(mt);if((s=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++mt,i=i*t+s}return mt===r||null!=e&&mt-r!==e?null:i}function P(){mt+=2;var t=b(16);return null==t&&r(gt+2,"Expected hexadecimal number"),$e(lt.charCodeAt(mt))&&r(mt,"Identifier directly after number"),s(Ut,t)}function I(t){var e=mt,i=!1,n=48===lt.charCodeAt(mt);t||null!==b(10)||r(e,"Invalid number"),46===lt.charCodeAt(mt)&&(++mt,b(10),i=!0);var o=lt.charCodeAt(mt);69!==o&&101!==o||(43!==(o=lt.charCodeAt(++mt))&&45!==o||++mt,null===b(10)&&r(e,"Invalid number"),i=!0),$e(lt.charCodeAt(mt))&&r(mt,"Identifier directly after number");var a,p=lt.slice(e,mt);return i?a=parseFloat(p):n&&1!==p.length?/[89]/.test(p)||At?r(e,"Invalid number"):a=parseInt(p,8):a=parseInt(p,10),s(Ut,a)}function k(t){mt++;for(var e="";;){mt>=ft&&r(gt,"Unterminated string constant");var i=lt.charCodeAt(mt);if(i===t)return++mt,s(_t,e);if(92===i){i=lt.charCodeAt(++mt);var n=/^[0-7]+/.exec(lt.slice(mt,mt+3));for(n&&(n=n[0]);n&&parseInt(n,8)>255;)n=n.slice(0,-1);if("0"===n&&(n=null),++mt,n)At&&r(mt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(n,8)),mt+=n.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(R(2));break;case 117:e+=String.fromCharCode(R(4));break;case 85:e+=String.fromCharCode(R(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===lt.charCodeAt(mt)&&++mt;case 10:ut.locations&&(Rt=mt,++kt);break;default:e+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||r(gt,"Unterminated string constant"),e+=String.fromCharCode(i),++mt}}function R(t){var e=b(16,t);return null===e&&r(gt,"Bad character escape sequence"),e}function x(){Be=!1;for(var t,e=!0,i=mt;;){var n=lt.charCodeAt(mt);if(Ze(n))Be&&(t+=lt.charAt(mt)),++mt;else{if(92!==n)break;Be||(t=lt.slice(i,mt)),Be=!0,117!=lt.charCodeAt(++mt)&&r(mt,"Expecting Unicode escape sequence \\uXXXX"),++mt;var o=R(4),s=String.fromCharCode(o);s||r(mt-1,"Invalid Unicode escape"),(e?$e(o):Ze(o))||r(mt-4,"Invalid Unicode escape"),t+=s}e=!1}return Be?t:lt.slice(i,mt)}function F(){var t=x(),e=jt;return Be||(Ve(t)?e=he[t]:(ut.forbidReserved&&(3===ut.ecmaVersion?Le:Me)(t)||At&&Ye(t))&&r(gt,"The keyword '"+t+"' is reserved")),s(e,t)}function O(){xt=gt,Ft=St,Ot=Nt,S()}function C(t){if(At=t,mt=Ft,ut.locations)for(;mt<Rt;)Rt=lt.lastIndexOf("\n",Rt-2)+1,--kt;c(),S()}function w(){this.type=null,this.start=gt,this.end=null}function A(){this.start=Et,this.end=null,null!==vt&&(this.source=vt)}function T(){var t=new w;return ut.locations&&(t.loc=new A),ut.directSourceFile&&(t.sourceFile=ut.directSourceFile),ut.ranges&&(t.range=[gt,0]),t}function U(t){var e=new w;return e.start=t.start,ut.locations&&(e.loc=new A,e.loc.start=t.loc.start),ut.ranges&&(e.range=[t.range[0],0]),e}function D(t,e){return t.type=e,t.end=Ft,ut.locations&&(t.loc.end=Ot),ut.ranges&&(t.range[1]=Ft),t}function _(t){return ut.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function j(t){if(bt===t)return O(),!0}function B(){return!ut.strictSemicolons&&(bt===Bt||bt===ve||We.test(lt.slice(Ft,gt)))}function L(){j(ge)||B()||Y()}function M(t){bt===t?O():Y()}function Y(){r(gt,"Unexpected token")}function G(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&r(t.start,"Assigning to rvalue"),At&&"Identifier"===t.type&&Ge(t.name)&&r(t.start,"Assigning to "+t.name+" in strict mode")}function V(t){xt=Ft=mt,ut.locations&&(Ot=new n),Ct=At=null,wt=[],S();var e=t||T(),r=!0;for(t||(e.body=[]);bt!==Bt;){var i=J();e.body.push(i),r&&_(i)&&C(!0),r=!1}return D(e,"Program")}function J(){(bt===be||bt===Ie&&"/="==Pt)&&S(!0);var t=bt,e=T();switch(t){case Lt:case Gt:O();var i=t===Lt;j(ge)||B()?e.label=null:bt!==jt?Y():(e.label=ht(),L());for(l=0;l<wt.length;++l){var n=wt[l];if(null==e.label||n.name===e.label.name){if(null!=n.kind&&(i||"loop"===n.kind))break;if(e.label&&i)break}}return l===wt.length&&r(e.start,"Unsyntactic "+t.keyword),D(e,i?"BreakStatement":"ContinueStatement");case Vt:return O(),L(),D(e,"DebuggerStatement");case qt:return O(),wt.push(Qe),e.body=J(),wt.pop(),M(re),e.test=q(),L(),D(e,"DoWhileStatement");case Wt:if(O(),wt.push(Qe),M(de),bt===ge)return z(e,null);if(bt===ee){o=T();return O(),H(o,!0),D(o,"VariableDeclaration"),1===o.declarations.length&&j(ce)?W(e,o):z(e,o)}var o=$(!1,!0);return j(ce)?(G(o),W(e,o)):z(e,o);case Ht:return O(),pt(e,!0);case $t:return O(),e.test=q(),e.consequent=J(),e.alternate=j(Xt)?J():null,D(e,"IfStatement");case Zt:return Ct||r(gt,"'return' outside of function"),O(),j(ge)||B()?e.argument=null:(e.argument=$(),L()),D(e,"ReturnStatement");case Qt:O(),e.discriminant=q(),e.cases=[],M(fe),wt.push(Ke);for(var s,a;bt!=ve;)if(bt===Mt||bt===Jt){var p=bt===Mt;s&&D(s,"SwitchCase"),e.cases.push(s=T()),s.consequent=[],O(),p?s.test=$():(a&&r(xt,"Multiple default clauses"),a=!0,s.test=null),M(Se)}else s||Y(),s.consequent.push(J());return s&&D(s,"SwitchCase"),O(),wt.pop(),D(e,"SwitchStatement");case Kt:return O(),We.test(lt.slice(Ft,gt))&&r(Ft,"Illegal newline after throw"),e.argument=$(),L(),D(e,"ThrowStatement");case te:if(O(),e.block=X(),e.handler=null,bt===Yt){var c=T();O(),M(de),c.param=ht(),At&&Ge(c.param.name)&&r(c.param.start,"Binding "+c.param.name+" in strict mode"),M(ye),c.guard=null,c.body=X(),e.handler=D(c,"CatchClause")}return e.guardedHandlers=Tt,e.finalizer=j(zt)?X():null,e.handler||e.finalizer||r(e.start,"Missing catch or finally clause"),D(e,"TryStatement");case ee:return O(),H(e),L(),D(e,"VariableDeclaration");case re:return O(),e.test=q(),wt.push(Qe),e.body=J(),wt.pop(),D(e,"WhileStatement");case ie:return At&&r(gt,"'with' in strict mode"),O(),e.object=q(),e.body=J(),D(e,"WithStatement");case fe:return X();case ge:return O(),D(e,"EmptyStatement");default:var h=Pt,u=$();if(t===jt&&"Identifier"===u.type&&j(Se)){for(var l=0;l<wt.length;++l)wt[l].name===h&&r(u.start,"Label '"+h+"' is already declared");var f=bt.isLoop?"loop":bt===Qt?"switch":null;return wt.push({name:h,kind:f}),e.body=J(),wt.pop(),e.label=u,D(e,"LabeledStatement")}return e.expression=u,L(),D(e,"ExpressionStatement")}}function q(){M(de);var t=$();return M(ye),t}function X(t){var e,r=T(),i=!0,n=!1;for(r.body=[],M(fe);!j(ve);){var o=J();r.body.push(o),i&&t&&_(o)&&(e=n,C(n=!0)),i=!1}return n&&!e&&C(!1),D(r,"BlockStatement")}function z(t,e){return t.init=e,M(ge),t.test=bt===ge?null:$(),M(ge),t.update=bt===ye?null:$(),M(ye),t.body=J(),wt.pop(),D(t,"ForStatement")}function W(t,e){return t.left=e,t.right=$(),M(ye),t.body=J(),wt.pop(),D(t,"ForInStatement")}function H(t,e){for(t.declarations=[],t.kind="var";;){var i=T();if(i.id=ht(),At&&Ge(i.id.name)&&r(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=j(Pe)?$(!0,e):null,t.declarations.push(D(i,"VariableDeclarator")),!j(me))break}return t}function $(t,e){var r=Z(e);if(!t&&bt===me){var i=U(r);for(i.expressions=[r];j(me);)i.expressions.push(Z(e));return D(i,"SequenceExpression")}return r}function Z(t){var e=Q(t);if(bt.isAssign){var r=U(e);return r.operator=Pt,r.left=e,O(),r.right=Z(t),G(e),D(r,"AssignmentExpression")}return e}function Q(t){var e=K(t);if(j(Ne)){var r=U(e);return r.test=e,r.consequent=$(!0),M(Se),r.alternate=$(!0,t),D(r,"ConditionalExpression")}return e}function K(t){return tt(et(),-1,t)}function tt(t,e,r){var i=bt.binop;if(null!=i&&(!r||bt!==ce)&&i>e){var n=U(t);n.left=t,n.operator=Pt;var o=bt;return O(),n.right=tt(et(),i,r),tt(D(n,o===xe||o===Fe?"LogicalExpression":"BinaryExpression"),e,r)}return t}function et(){if(bt.prefix){var t=T(),e=bt.isUpdate;return t.operator=Pt,t.prefix=!0,It=!0,O(),t.argument=et(),e?G(t.argument):At&&"delete"===t.operator&&"Identifier"===t.argument.type&&r(t.start,"Deleting local variable in strict mode"),D(t,e?"UpdateExpression":"UnaryExpression")}for(var i=rt();bt.postfix&&!B();)(t=U(i)).operator=Pt,t.prefix=!1,t.argument=i,G(i),O(),i=D(t,"UpdateExpression");return i}function rt(){return it(nt())}function it(t,e){if(j(Ee))return(r=U(t)).object=t,r.property=ht(!0),r.computed=!1,it(D(r,"MemberExpression"),e);if(j(ue))return(r=U(t)).object=t,r.property=$(),r.computed=!0,M(le),it(D(r,"MemberExpression"),e);if(!e&&j(de)){var r=U(t);return r.callee=t,r.arguments=ct(ye,!1),it(D(r,"CallExpression"),e)}return t}function nt(){switch(bt){case oe:i=T();return O(),D(i,"ThisExpression");case jt:return ht();case Ut:case _t:case Dt:return(i=T()).value=Pt,i.raw=lt.slice(gt,St),O(),D(i,"Literal");case se:case ae:case pe:return(i=T()).value=bt.atomValue,i.raw=bt.keyword,O(),D(i,"Literal");case de:var t=Et,e=gt;O();var r=$();return r.start=e,r.end=St,ut.locations&&(r.loc.start=t,r.loc.end=Nt),ut.ranges&&(r.range=[e,St]),M(ye),r;case ue:i=T();return O(),i.elements=ct(le,!0,!0),D(i,"ArrayExpression");case fe:return st();case Ht:var i=T();return O(),pt(i,!1);case ne:return ot();default:Y()}}function ot(){var t=T();return O(),t.callee=it(nt(),!0),j(de)?t.arguments=ct(ye,!1):t.arguments=Tt,D(t,"NewExpression")}function st(){var t=T(),e=!0,i=!1;for(t.properties=[],O();!j(ve);){if(e)e=!1;else if(M(me),ut.allowTrailingCommas&&j(ve))break;var n,o={key:at()},s=!1;if(j(Se)?(o.value=$(!0),n=o.kind="init"):ut.ecmaVersion>=5&&"Identifier"===o.key.type&&("get"===o.key.name||"set"===o.key.name)?(s=i=!0,n=o.kind=o.key.name,o.key=at(),bt!==de&&Y(),o.value=pt(T(),!1)):Y(),"Identifier"===o.key.type&&(At||i))for(var a=0;a<t.properties.length;++a){var p=t.properties[a];if(p.key.name===o.key.name){var c=n==p.kind||s&&"init"===p.kind||"init"===n&&("get"===p.kind||"set"===p.kind);c&&!At&&"init"===n&&"init"===p.kind&&(c=!1),c&&r(o.key.start,"Redefinition of property")}}t.properties.push(o)}return D(t,"ObjectExpression")}function at(){return bt===Ut||bt===_t?nt():ht(!0)}function pt(t,e){bt===jt?t.id=ht():e?Y():t.id=null,t.params=[];var i=!0;for(M(de);!j(ye);)i?i=!1:M(me),t.params.push(ht());var n=Ct,o=wt;if(Ct=!0,wt=[],t.body=X(!0),Ct=n,wt=o,At||t.body.body.length&&_(t.body.body[0]))for(var s=t.id?-1:0;s<t.params.length;++s){var a=s<0?t.id:t.params[s];if((Ye(a.name)||Ge(a.name))&&r(a.start,"Defining '"+a.name+"' in strict mode"),s>=0)for(var p=0;p<s;++p)a.name===t.params[p].name&&r(a.start,"Argument name clash in strict mode")}return D(t,e?"FunctionDeclaration":"FunctionExpression")}function ct(t,e,r){for(var i=[],n=!0;!j(t);){if(n)n=!1;else if(M(me),e&&ut.allowTrailingCommas&&j(t))break;r&&bt===me?i.push(null):i.push($(!0))}return i}function ht(t){var e=T();return e.name=bt===jt?Pt:t&&!ut.forbidReserved&&bt.keyword||Y(),It=!1,O(),D(e,"Identifier")}t.version="0.4.1";var ut,lt,ft,vt;t.parse=function(t,r){return lt=String(t),ft=lt.length,e(r),o(),V(ut.program)};var dt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},yt=t.getLineInfo=function(t,e){for(var r=1,i=0;;){He.lastIndex=i;var n=He.exec(t);if(!(n&&n.index<e))break;++r,i=n.index+n[0].length}return{line:r,column:e-i}};t.tokenize=function(t,r){function i(t){return S(t),n.start=gt,n.end=St,n.startLoc=Et,n.endLoc=Nt,n.type=bt,n.value=Pt,n}lt=String(t),ft=lt.length,e(r),o();var n={};return i.jumpTo=function(t,e){if(mt=t,ut.locations){kt=1,Rt=He.lastIndex=0;for(var r;(r=He.exec(lt))&&r.index<t;)++kt,Rt=r.index+r[0].length}It=e,c()},i};var mt,gt,St,Et,Nt,bt,Pt,It,kt,Rt,xt,Ft,Ot,Ct,wt,At,Tt=[],Ut={type:"num"},Dt={type:"regexp"},_t={type:"string"},jt={type:"name"},Bt={type:"eof"},Lt={keyword:"break"},Mt={keyword:"case",beforeExpr:!0},Yt={keyword:"catch"},Gt={keyword:"continue"},Vt={keyword:"debugger"},Jt={keyword:"default"},qt={keyword:"do",isLoop:!0},Xt={keyword:"else",beforeExpr:!0},zt={keyword:"finally"},Wt={keyword:"for",isLoop:!0},Ht={keyword:"function"},$t={keyword:"if"},Zt={keyword:"return",beforeExpr:!0},Qt={keyword:"switch"},Kt={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},re={keyword:"while",isLoop:!0},ie={keyword:"with"},ne={keyword:"new",beforeExpr:!0},oe={keyword:"this"},se={keyword:"null",atomValue:null},ae={keyword:"true",atomValue:!0},pe={keyword:"false",atomValue:!1},ce={keyword:"in",binop:7,beforeExpr:!0},he={break:Lt,case:Mt,catch:Yt,continue:Gt,debugger:Vt,default:Jt,do:qt,else:Xt,finally:zt,for:Wt,function:Ht,if:$t,return:Zt,switch:Qt,throw:Kt,try:te,var:ee,while:re,with:ie,null:se,true:ae,false:pe,new:ne,in:ce,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:oe,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ue={type:"[",beforeExpr:!0},le={type:"]"},fe={type:"{",beforeExpr:!0},ve={type:"}"},de={type:"(",beforeExpr:!0},ye={type:")"},me={type:",",beforeExpr:!0},ge={type:";",beforeExpr:!0},Se={type:":",beforeExpr:!0},Ee={type:"."},Ne={type:"?",beforeExpr:!0},be={binop:10,beforeExpr:!0},Pe={isAssign:!0,beforeExpr:!0},Ie={isAssign:!0,beforeExpr:!0},ke={postfix:!0,prefix:!0,isUpdate:!0},Re={prefix:!0,beforeExpr:!0},xe={binop:1,beforeExpr:!0},Fe={binop:2,beforeExpr:!0},Oe={binop:3,beforeExpr:!0},Ce={binop:4,beforeExpr:!0},we={binop:5,beforeExpr:!0},Ae={binop:6,beforeExpr:!0},Te={binop:7,beforeExpr:!0},Ue={binop:8,beforeExpr:!0},De={binop:9,prefix:!0,beforeExpr:!0},_e={binop:10,beforeExpr:!0};t.tokTypes={bracketL:ue,bracketR:le,braceL:fe,braceR:ve,parenL:de,parenR:ye,comma:me,semi:ge,colon:Se,dot:Ee,question:Ne,slash:be,eq:Pe,name:jt,eof:Bt,num:Ut,regexp:Dt,string:_t};for(var je in he)t.tokTypes["_"+je]=he[je];var Be,Le=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Me=i("class enum extends super const export import"),Ye=i("implements interface let package private protected public static yield"),Ge=i("eval arguments"),Ve=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Je=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,qe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Xe=new RegExp("["+qe+"]"),ze=new RegExp("["+qe+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),We=/[\n\r\u2028\u2029]/,He=/\r\n|[\n\r\u2028\u2029]/g,$e=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Xe.test(String.fromCharCode(t)))},Ze=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&ze.test(String.fromCharCode(t))))},Qe={kind:"loop"},Ke={kind:"switch"}});var Interpreter=function(t,e){"string"==typeof t&&(t=acorn.parse(t)),this.ast=t,this.initFunc_=e,this.paused_=!1,this.UNDEFINED=new Interpreter.Primitive(void 0,this),this.NULL=new Interpreter.Primitive(null,this),this.TRUE=new Interpreter.Primitive(!0,this),this.FALSE=new Interpreter.Primitive(!1,this),this.NUMBER_ZERO=new Interpreter.Primitive(0,this),this.NUMBER_ONE=new Interpreter.Primitive(1,this),this.STRING_EMPTY=new Interpreter.Primitive("",this);var r=this.createScope(this.ast,null);this.TRUE.parent=this.BOOLEAN,this.FALSE.parent=this.BOOLEAN,this.NUMBER_ZERO.parent=this.NUMBER,this.NUMBER_ONE.parent=this.NUMBER,this.STRING_EMPTY.parent=this.STRING,this.stateStack=[{node:this.ast,scope:r,thisExpression:r,done:!1}]};Interpreter.prototype.appendCode=function(t){var e=this.stateStack[this.stateStack.length-1];if(!e||"Program"!=e.node.type)throw Error("Expecting original AST to start with a Program node.");if("string"==typeof t&&(t=acorn.parse(t)),!t||"Program"!=t.type)throw Error("Expecting new AST to start with a Program node.");for(var r,i=0;r=t.body[i];i++)e.node.body.push(r);e.done=!1},Interpreter.prototype.step=function(){var t=this.stateStack[0];return!(!t||"Program"==t.node.type&&t.done)&&(!!this.paused_||(this["step"+t.node.type](),!0))},Interpreter.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},Interpreter.prototype.initGlobalScope=function(t){this.setProperty(t,"Infinity",this.createPrimitive(1/0),!0),this.setProperty(t,"NaN",this.createPrimitive(NaN),!0),this.setProperty(t,"undefined",this.UNDEFINED,!0),this.setProperty(t,"window",t,!0),this.setProperty(t,"self",t,!1),this.initFunction(t),this.initObject(t),t.parent=this.OBJECT,this.initArray(t),this.initNumber(t),this.initString(t),this.initBoolean(t),this.initDate(t),this.initMath(t),this.initRegExp(t),this.initJSON(t),this.initError(t);var e,r=this;e=function(t){return t=t||r.UNDEFINED,r.createPrimitive(isNaN(t.toNumber()))},this.setProperty(t,"isNaN",this.createNativeFunction(e)),e=function(t){return t=t||r.UNDEFINED,r.createPrimitive(isFinite(t.toNumber()))},this.setProperty(t,"isFinite",this.createNativeFunction(e)),e=function(t){return t=t||r.UNDEFINED,r.createPrimitive(parseFloat(t.toNumber()))},this.setProperty(t,"parseFloat",this.createNativeFunction(e)),e=function(t,e){return t=t||r.UNDEFINED,e=e||r.UNDEFINED,r.createPrimitive(parseInt(t.toString(),e.toNumber()))},this.setProperty(t,"parseInt",this.createNativeFunction(e));var i=this.createObject(this.FUNCTION);i.eval=!0,this.setProperty(i,"length",this.NUMBER_ONE,!0),this.setProperty(t,"eval",i);for(var n=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],o=0;o<n.length;o++)e=function(t){return function(e){e=(e||r.UNDEFINED).toString();try{e=t(e)}catch(t){r.throwException(r.URI_ERROR,t.message)}return r.createPrimitive(e)}}(n[o][0]),this.setProperty(t,n[o][1],this.createNativeFunction(e));this.initFunc_&&this.initFunc_(this,t)},Interpreter.prototype.initFunction=function(t){var e,r=this;e=function(t){if(this.parent==r.FUNCTION)e=this;else var e=r.createObject(r.FUNCTION);if(arguments.length)i=arguments[arguments.length-1].toString();else var i="";for(var n=[],o=0;o<arguments.length-1;o++)n.push(arguments[o].toString());if(-1!=(n=n.join(", ")).indexOf(")"))throw SyntaxError("Function arg string contains parenthesis");e.parentScope=r.stateStack[r.stateStack.length-1].scope;var s=acorn.parse("$ = function("+n+") {"+i+"};");return e.node=s.body[0].expression.right,r.setProperty(e,"length",r.createPrimitive(e.node.length),!0),e},this.FUNCTION=this.createObject(null),this.setProperty(t,"Function",this.FUNCTION),this.FUNCTION.type="function",this.setProperty(this.FUNCTION,"prototype",this.createObject(null)),this.FUNCTION.nativeFunc=e;var i={type:"FunctionApply_",params:[],id:null,body:null,start:0,end:0};this.setProperty(this.FUNCTION.properties.prototype,"apply",this.createFunction(i,{}),!1,!0),i={type:"FunctionCall_",params:[],id:null,body:null,start:0,end:0},this.setProperty(this.FUNCTION.properties.prototype,"call",this.createFunction(i,{}),!1,!0),e=function(){return r.createPrimitive(this.toString())},this.setProperty(this.FUNCTION.properties.prototype,"toString",this.createNativeFunction(e),!1,!0),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(e),!1,!0),e=function(){return r.createPrimitive(this.valueOf())},this.setProperty(this.FUNCTION.properties.prototype,"valueOf",this.createNativeFunction(e),!1,!0),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initObject=function(t){var e,r=this;e=function(t){if(this.parent==r.OBJECT)e=this;else var e=r.createObject(r.OBJECT);return e},this.OBJECT=this.createNativeFunction(e),this.setProperty(t,"Object",this.OBJECT),e=function(){return r.createPrimitive(this.toString())},this.setProperty(this.OBJECT.properties.prototype,"toString",this.createNativeFunction(e),!1,!0),e=function(){return r.createPrimitive(this.valueOf())},this.setProperty(this.OBJECT.properties.prototype,"valueOf",this.createNativeFunction(e),!1,!0),e=function(t){t=(t||r.UNDEFINED).toString();for(var e in this.properties)if(e==t)return r.TRUE;return r.FALSE},this.setProperty(this.OBJECT.properties.prototype,"hasOwnProperty",this.createNativeFunction(e),!1,!0),e=function(t){return t=(t||r.UNDEFINED).toString(),r.createPrimitive(!(t in this.nonenumerable))},this.setProperty(this.OBJECT.properties.prototype,"propertyIsEnumerable",this.createNativeFunction(e),!1,!0),e=function(t){var e=r.createObject(r.ARRAY),i=0;for(var n in t.properties)r.setProperty(e,i,r.createPrimitive(n)),i++;return e},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(e),!1,!0),e=function(t){var e=r.createObject(r.ARRAY),i=0;for(var n in t.properties)n in t.nonenumerable||(r.setProperty(e,i,r.createPrimitive(n)),i++);return e},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(e),!1,!0),e=function(t,e,i){if(e=(e||r.UNDEFINED).toString(),!(i instanceof Interpreter.Object))throw Error("Property description must be an object.");return t},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initArray=function(t){var e,r=this,i=function(t,e){var r=t?Math.floor(t.toNumber()):e;return isNaN(r)&&(r=e),r},n=function(t,e){return t.isPrimitive&&e.isPrimitive?t.data===e.data:t===e};e=function(t){if(this.parent==r.ARRAY)e=this;else var e=r.createObject(r.ARRAY);var i=arguments[0];if(i&&"number"==i.type)isNaN(r.arrayIndex(i))&&r.throwException(r.RANGE_ERROR,"Invalid array length"),e.length=i.data;else{for(var n=0;n<arguments.length;n++)e.properties[n]=arguments[n];e.length=n}return e},this.ARRAY=this.createNativeFunction(e),this.setProperty(t,"Array",this.ARRAY),e=function(){if(this.length){t=this.properties[this.length-1];delete this.properties[this.length-1],this.length--}else var t=r.UNDEFINED;return t},this.setProperty(this.ARRAY.properties.prototype,"pop",this.createNativeFunction(e),!1,!0),e=function(t){for(var e=0;e<arguments.length;e++)this.properties[this.length]=arguments[e],this.length++;return r.createPrimitive(this.length)},this.setProperty(this.ARRAY.properties.prototype,"push",this.createNativeFunction(e),!1,!0),e=function(){if(this.length){for(var t=this.properties[0],e=1;e<this.length;e++)this.properties[e-1]=this.properties[e];this.length--,delete this.properties[this.length]}else t=r.UNDEFINED;return t},this.setProperty(this.ARRAY.properties.prototype,"shift",this.createNativeFunction(e),!1,!0),e=function(t){for(e=this.length-1;e>=0;e--)this.properties[e+arguments.length]=this.properties[e];this.length+=arguments.length;for(var e=0;e<arguments.length;e++)this.properties[e]=arguments[e];return r.createPrimitive(this.length)},this.setProperty(this.ARRAY.properties.prototype,"unshift",this.createNativeFunction(e),!1,!0),e=function(){for(var t=0;t<this.length/2;t++){var e=this.properties[this.length-t-1];this.properties[this.length-t-1]=this.properties[t],this.properties[t]=e}return r.UNDEFINED},this.setProperty(this.ARRAY.properties.prototype,"reverse",this.createNativeFunction(e),!1,!0),e=function(t,e,n){t=(t=i(t,0))<0?Math.max(this.length+t,0):Math.min(t,this.length),e=i(e,1/0),e=Math.min(e,this.length-t);for(var o=r.createObject(r.ARRAY),s=t;s<t+e;s++)o.properties[o.length++]=this.properties[s],this.properties[s]=this.properties[s+e];for(s=t+e;s<this.length-e;s++)this.properties[s]=this.properties[s+e];for(s=this.length-e;s<this.length;s++)delete this.properties[s];this.length-=e;for(s=this.length-1;s>=t;s--)this.properties[s+arguments.length-2]=this.properties[s];this.length+=arguments.length-2;for(s=2;s<arguments.length;s++)this.properties[t+s-2]=arguments[s];return o},this.setProperty(this.ARRAY.properties.prototype,"splice",this.createNativeFunction(e),!1,!0),e=function(t,e){var n=r.createObject(r.ARRAY),o=i(t,0);o<0&&(o=this.length+o),o=Math.max(0,Math.min(o,this.length));var s=i(e,this.length);s<0&&(s=this.length+s),s=Math.max(0,Math.min(s,this.length));for(var a=0,p=o;p<s;p++){var c=r.getProperty(this,p);r.setProperty(n,a++,c)}return n},this.setProperty(this.ARRAY.properties.prototype,"slice",this.createNativeFunction(e),!1,!0),e=function(t){if(t&&void 0!==t.data)e=t.toString();else var e=void 0;for(var i=[],n=0;n<this.length;n++)i[n]=this.properties[n];return r.createPrimitive(i.join(e))},this.setProperty(this.ARRAY.properties.prototype,"join",this.createNativeFunction(e),!1,!0),e=function(t){for(var e=r.createObject(r.ARRAY),i=0,n=0;n<this.length;n++){a=r.getProperty(this,n);r.setProperty(e,i++,a)}for(n=0;n<arguments.length;n++){var o=arguments[n];if(r.isa(o,r.ARRAY))for(var s=0;s<o.length;s++){var a=r.getProperty(o,s);r.setProperty(e,i++,a)}else r.setProperty(e,i++,o)}return e},this.setProperty(this.ARRAY.properties.prototype,"concat",this.createNativeFunction(e),!1,!0),e=function(t,e){t=t||r.UNDEFINED;var o=i(e,0);o<0&&(o=this.length+o);for(var s=o=Math.max(0,o);s<this.length;s++){var a=r.getProperty(this,s);if(n(a,t))return r.createPrimitive(s)}return r.createPrimitive(-1)},this.setProperty(this.ARRAY.properties.prototype,"indexOf",this.createNativeFunction(e),!1,!0),e=function(t,e){t=t||r.UNDEFINED;var o=i(e,this.length);o<0&&(o=this.length+o);for(var s=o=Math.min(o,this.length-1);s>=0;s--){var a=r.getProperty(this,s);if(n(a,t))return r.createPrimitive(s)}return r.createPrimitive(-1)},this.setProperty(this.ARRAY.properties.prototype,"lastIndexOf",this.createNativeFunction(e),!1,!0),e=function(t){for(var e=[],i=0;i<this.length;i++)e[i]=this.properties[i];e.sort();for(i=0;i<e.length;i++)r.setProperty(this,i,e[i]);return this},this.setProperty(this.ARRAY.properties.prototype,"sort",this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initNumber=function(t){var e,r=this;e=function(t){return t=t?t.toNumber():0,this.parent!=r.NUMBER?r.createPrimitive(t):(this.data=t,this)},this.NUMBER=this.createNativeFunction(e),this.setProperty(t,"Number",this.NUMBER);for(var i=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],n=0;n<i.length;n++)this.setProperty(this.NUMBER,i[n],this.createPrimitive(Number[i[n]]));e=function(t){t=t?t.toNumber():void 0;var e=this.toNumber();return r.createPrimitive(e.toExponential(t))},this.setProperty(this.NUMBER.properties.prototype,"toExponential",this.createNativeFunction(e),!1,!0),e=function(t){t=t?t.toNumber():void 0;var e=this.toNumber();return r.createPrimitive(e.toFixed(t))},this.setProperty(this.NUMBER.properties.prototype,"toFixed",this.createNativeFunction(e),!1,!0),e=function(t){t=t?t.toNumber():void 0;var e=this.toNumber();return r.createPrimitive(e.toPrecision(t))},this.setProperty(this.NUMBER.properties.prototype,"toPrecision",this.createNativeFunction(e),!1,!0),e=function(t){t=t?t.toNumber():10;var e=this.toNumber();return r.createPrimitive(e.toString(t))},this.setProperty(this.NUMBER.properties.prototype,"toString",this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initString=function(t){var e,r=this;e=function(t){return t=t?t.toString():"",this.parent!=r.STRING?r.createPrimitive(t):(this.data=t,this)},this.STRING=this.createNativeFunction(e),this.setProperty(t,"String",this.STRING);for(var i=["toLowerCase","toUpperCase","toLocaleLowerCase","toLocaleUpperCase"],n=0;n<i.length;n++)e=function(t){return function(){return r.createPrimitive(t.apply(this))}}(String.prototype[i[n]]),this.setProperty(this.STRING.properties.prototype,i[n],this.createNativeFunction(e),!1,!0);e=function(){var t=this.toString();return r.createPrimitive(t.replace(/^\s+|\s+$/g,""))},this.setProperty(this.STRING.properties.prototype,"trim",this.createNativeFunction(e),!1,!0),e=function(){var t=this.toString();return r.createPrimitive(t.replace(/^\s+/g,""))},this.setProperty(this.STRING.properties.prototype,"trimLeft",this.createNativeFunction(e),!1,!0),e=function(){var t=this.toString();return r.createPrimitive(t.replace(/\s+$/g,""))},this.setProperty(this.STRING.properties.prototype,"trimRight",this.createNativeFunction(e),!1,!0),e=function(t){var e=this.toString();return t=(t||r.UNDEFINED).toNumber(),r.createPrimitive(e.charAt(t))},this.setProperty(this.STRING.properties.prototype,"charAt",this.createNativeFunction(e),!1,!0),e=function(t){var e=this.toString();return t=(t||r.UNDEFINED).toNumber(),r.createPrimitive(e.charCodeAt(t))},this.setProperty(this.STRING.properties.prototype,"charCodeAt",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();return t=(t||r.UNDEFINED).toString(),e=e?e.toNumber():void 0,r.createPrimitive(i.indexOf(t,e))},this.setProperty(this.STRING.properties.prototype,"indexOf",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();return t=(t||r.UNDEFINED).toString(),e=e?e.toNumber():void 0,r.createPrimitive(i.lastIndexOf(t,e))},this.setProperty(this.STRING.properties.prototype,"lastIndexOf",this.createNativeFunction(e),!1,!0),e=function(t){var e=this.toString();return t=(t||r.UNDEFINED).toString(),r.createPrimitive(e.localeCompare(t))},this.setProperty(this.STRING.properties.prototype,"localeCompare",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();t=t?r.isa(t,r.REGEXP)?t.data:t.toString():void 0,e=e?e.toNumber():void 0;for(var n=i.split(t,e),o=r.createObject(r.ARRAY),s=0;s<n.length;s++)r.setProperty(o,s,r.createPrimitive(n[s]));return o},this.setProperty(this.STRING.properties.prototype,"split",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();return t=t?t.toNumber():void 0,e=e?e.toNumber():void 0,r.createPrimitive(i.substring(t,e))},this.setProperty(this.STRING.properties.prototype,"substring",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();return t=t?t.toNumber():void 0,e=e?e.toNumber():void 0,r.createPrimitive(i.substr(t,e))},this.setProperty(this.STRING.properties.prototype,"substr",this.createNativeFunction(e),!1,!0),e=function(t){for(var e=this.toString(),i=0;i<arguments.length;i++)e+=arguments[i].toString();return r.createPrimitive(e)},this.setProperty(this.STRING.properties.prototype,"concat",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();return t=t?t.toNumber():void 0,e=e?e.toNumber():void 0,r.createPrimitive(i.slice(t,e))},this.setProperty(this.STRING.properties.prototype,"slice",this.createNativeFunction(e),!1,!0),e=function(t){var e=this.toString();t=t?t.data:void 0;var i=e.match(t);if(null===i)return r.NULL;for(var n=r.createObject(r.ARRAY),o=0;o<i.length;o++)r.setProperty(n,o,r.createPrimitive(i[o]));return n},this.setProperty(this.STRING.properties.prototype,"match",this.createNativeFunction(e),!1,!0),e=function(t){var e=this.toString();return t=t?t.data:void 0,r.createPrimitive(e.search(t))},this.setProperty(this.STRING.properties.prototype,"search",this.createNativeFunction(e),!1,!0),e=function(t,e){var i=this.toString();return t=(t||r.UNDEFINED).valueOf(),e=(e||r.UNDEFINED).toString(),r.createPrimitive(i.replace(t,e))},this.setProperty(this.STRING.properties.prototype,"replace",this.createNativeFunction(e),!1,!0),e=function(t){for(var e=0;e<arguments.length;e++)arguments[e]=arguments[e].toNumber();return r.createPrimitive(String.fromCharCode.apply(String,arguments))},this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initBoolean=function(t){var e,r=this;e=function(t){return t=!!t&&t.toBoolean(),this.parent!=r.BOOLEAN?r.createPrimitive(t):(this.data=t,this)},this.BOOLEAN=this.createNativeFunction(e),this.setProperty(t,"Boolean",this.BOOLEAN)},Interpreter.prototype.initDate=function(t){var e,r=this;e=function(t,e,i,n,o,s,a){if(this.parent==r.DATE)p=this;else var p=r.createObject(r.DATE);if(arguments.length)if(1!=arguments.length||"string"!=t.type&&!r.isa(t,r.STRING)){for(var c=[null],h=0;h<arguments.length;h++)c[h+1]=arguments[h]?arguments[h].toNumber():void 0;p.data=new(Function.prototype.bind.apply(Date,c))}else p.data=new Date(t.toString());else p.data=new Date;return p},this.DATE=this.createNativeFunction(e),this.setProperty(t,"Date",this.DATE),e=function(){return r.createPrimitive((new Date).getTime())},this.setProperty(this.DATE,"now",this.createNativeFunction(e),!1,!0),e=function(t){return t=t?t.toString():void 0,r.createPrimitive(Date.parse(t))},this.setProperty(this.DATE,"parse",this.createNativeFunction(e),!1,!0),e=function(t,e,i,n,o,s,a){for(var p=[],c=0;c<arguments.length;c++)p[c]=arguments[c]?arguments[c].toNumber():void 0;return r.createPrimitive(Date.UTC.apply(Date,p))},this.setProperty(this.DATE,"UTC",this.createNativeFunction(e),!1,!0);for(var i=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear"],n=0;n<i.length;n++)e=function(t){return function(){return r.createPrimitive(this.data[t]())}}(i[n]),this.setProperty(this.DATE.properties.prototype,i[n],this.createNativeFunction(e),!1,!0);for(var o=["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"],n=0;n<o.length;n++)e=function(t){return function(e){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n]?arguments[n].toNumber():void 0;return r.createPrimitive(this.data[t].apply(this.data,i))}}(o[n]),this.setProperty(this.DATE.properties.prototype,o[n],this.createNativeFunction(e),!1,!0);i=["toDateString","toISOString","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"];for(n=0;n<i.length;n++)e=function(t){return function(){return r.createPrimitive(this.data[t]())}}(i[n]),this.setProperty(this.DATE.properties.prototype,i[n],this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initMath=function(t){var e=this,r=this.createObject(this.OBJECT);this.setProperty(t,"Math",r);for(var i=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],n=0;n<i.length;n++)this.setProperty(r,i[n],this.createPrimitive(Math[i[n]]),!1,!0);for(var o=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],n=0;n<o.length;n++){var s=function(t){return function(){for(var r=0;r<arguments.length;r++)arguments[r]=arguments[r].toNumber();return e.createPrimitive(t.apply(Math,arguments))}}(Math[o[n]]);this.setProperty(r,o[n],this.createNativeFunction(s),!1,!0)}},Interpreter.prototype.initRegExp=function(t){var e,r=this;e=function(t,e){if(this.parent==r.REGEXP)i=this;else var i=r.createObject(r.REGEXP);return t=t?t.toString():"",e=e?e.toString():"",r.createRegExp(i,new RegExp(t,e)),i},this.REGEXP=this.createNativeFunction(e),this.setProperty(t,"RegExp",this.REGEXP),e=function(t){return t=t.toString(),r.createPrimitive(this.data.test(t))},this.setProperty(this.REGEXP.properties.prototype,"test",this.createNativeFunction(e),!1,!0),e=function(t){t=t.toString(),this.data.lastIndex=r.getProperty(this,"lastIndex").toNumber();var e=this.data.exec(t);if(r.setProperty(this,"lastIndex",r.createPrimitive(this.data.lastIndex)),e){for(var i=r.createObject(r.ARRAY),n=0;n<e.length;n++)r.setProperty(i,n,r.createPrimitive(e[n]));return r.setProperty(i,"index",r.createPrimitive(e.index)),r.setProperty(i,"input",r.createPrimitive(e.input)),i}return r.NULL},this.setProperty(this.REGEXP.properties.prototype,"exec",this.createNativeFunction(e),!1,!0)},Interpreter.prototype.initJSON=function(t){function e(t){if("object"!=typeof t)return i.createPrimitive(t);var r;if(t instanceof Array){r=i.createObject(i.ARRAY);for(var n=0;n<t.length;n++)i.setProperty(r,n,e(t[n]))}else{r=i.createObject(i.OBJECT);for(var o in t)i.setProperty(r,o,e(t[o]))}return r}function r(t){if(t.isPrimitive)return t.data;var e;if(t.length){e=[];for(var i=0;i<t.length;i++)e[i]=r(t.properties[i])}else{e={};for(var n in t.properties)e[n]=r(t.properties[n])}return e}var i=this,n=i.createObject(this.OBJECT);this.setProperty(t,"JSON",n);var o=function(t){return function(){var r=arguments[0].data;return e(t.call(JSON,r))}}(JSON.parse);this.setProperty(n,"parse",this.createNativeFunction(o)),o=function(t){return function(){var e=r(arguments[0]);return i.createPrimitive(t.call(JSON,e))}}(JSON.stringify),this.setProperty(n,"stringify",this.createNativeFunction(o))},Interpreter.prototype.initError=function(t){var e,r=this;e=function(t){if(this.parent==r.ERROR)e=this;else var e=r.createObject(r.ERROR);return t&&r.setProperty(e,"message",r.createPrimitive(String(t)),!1,!0),e},this.ERROR=this.createNativeFunction(e),this.setProperty(t,"Error",this.ERROR),this.setProperty(this.ERROR.properties.prototype,"message",this.STRING_EMPTY,!1,!0),this.setProperty(this.ERROR.properties.prototype,"name",this.createPrimitive("Error"),!1,!0);var i={EVAL_ERROR:"EvalError",RANGE_ERROR:"RangeError",REFERENCE_ERROR:"ReferenceError",SYNTAX_ERROR:"SyntaxError",TYPE_ERROR:"TypeError",URI_ERROR:"URIError"};for(var n in i){var o=i[n];e=function(t){return function(e){if(r.isa(this.parent,r.ERROR))i=this;else var i=r.createObject(r[t]);return e&&r.setProperty(i,"message",r.createPrimitive(String(e)),!1,!0),i}},this[n]=this.createNativeFunction(e(n)),this.setProperty(this[n],"prototype",this.createObject(this.ERROR)),this.setProperty(this[n].properties.prototype,"name",this.createPrimitive(o),!1,!0),this.setProperty(t,o,this[n])}},Interpreter.prototype.isa=function(t,e){if(!t||!e)return!1;for(;t.parent!=e;){if(!t.parent||!t.parent.properties.prototype)return!1;t=t.parent.properties.prototype}return!0},Interpreter.prototype.comp=function(t,e){return t.isPrimitive&&"number"==typeof t&&isNaN(t.data)||e.isPrimitive&&"number"==typeof e&&isNaN(e.data)?NaN:t.isPrimitive&&e.isPrimitive?(t=t.data,e=e.data,t<e?-1:t>e?1:0):NaN},Interpreter.prototype.arrayIndex=function(t){return t=Number(t),!isFinite(t)||t!=Math.floor(t)||t<0?NaN:t},Interpreter.Primitive=function(t,e){var r=typeof t;this.data=t,this.type=r,"number"==r?this.parent=e.NUMBER:"string"==r?this.parent=e.STRING:"boolean"==r&&(this.parent=e.BOOLEAN)},Interpreter.Primitive.prototype.data=void 0,Interpreter.Primitive.prototype.type=void 0,Interpreter.Primitive.prototype.parent=null,Interpreter.Primitive.prototype.isPrimitive=!0,Interpreter.Primitive.prototype.toBoolean=function(){return Boolean(this.data)},Interpreter.Primitive.prototype.toNumber=function(){return Number(this.data)},Interpreter.Primitive.prototype.toString=function(){return String(this.data)},Interpreter.Primitive.prototype.valueOf=function(){return this.data},Interpreter.prototype.createPrimitive=function(t){return void 0===t?this.UNDEFINED:null===t?this.NULL:!0===t?this.TRUE:!1===t?this.FALSE:0===t?this.NUMBER_ZERO:1===t?this.NUMBER_ONE:""===t?this.STRING_EMPTY:t instanceof RegExp?this.createRegExp(this.createObject(this.REGEXP),t):new Interpreter.Primitive(t,this)},Interpreter.Object=function(t){this.fixed=Object.create(null),this.nonenumerable=Object.create(null),this.properties=Object.create(null),this.parent=t},Interpreter.Object.prototype.type="object",Interpreter.Object.prototype.parent=null,Interpreter.Object.prototype.isPrimitive=!1,Interpreter.Object.prototype.data=void 0,Interpreter.Object.prototype.toBoolean=function(){return!0},Interpreter.Object.prototype.toNumber=function(){return Number(void 0===this.data?this.toString():this.data)},Interpreter.Object.prototype.toString=function(){return void 0===this.data?"["+this.type+"]":String(this.data)},Interpreter.Object.prototype.valueOf=function(){return void 0===this.data?this:this.data},Interpreter.prototype.createObject=function(t){var e=new Interpreter.Object(t);return this.isa(e,this.FUNCTION)&&(e.type="function",this.setProperty(e,"prototype",this.createObject(this.OBJECT||null))),this.isa(e,this.ARRAY)&&(e.length=0,e.toString=function(){for(var t=[],e=0;e<this.length;e++)t[e]=void 0==this.properties[e]||null==this.properties[e]?"":this.properties[e].toString();return t.join(",")}),e},Interpreter.prototype.createRegExp=function(t,e){return t.data=e,this.setProperty(t,"lastIndex",this.createPrimitive(t.data.lastIndex),!1,!0),this.setProperty(t,"source",this.createPrimitive(t.data.source),!0,!0),this.setProperty(t,"global",this.createPrimitive(t.data.global),!0,!0),this.setProperty(t,"ignoreCase",this.createPrimitive(t.data.ignoreCase),!0,!0),this.setProperty(t,"multiline",this.createPrimitive(t.data.multiline),!0,!0),t.toString=function(){return String(this.data)},t.valueOf=function(){return this.data},t},Interpreter.prototype.createFunction=function(t,e){var r=this.createObject(this.FUNCTION);return r.parentScope=e||this.getScope(),r.node=t,this.setProperty(r,"length",this.createPrimitive(r.node.params.length),!0),r},Interpreter.prototype.createNativeFunction=function(t){var e=this.createObject(this.FUNCTION);return e.nativeFunc=t,this.setProperty(e,"length",this.createPrimitive(t.length),!0),e},Interpreter.prototype.createAsyncFunction=function(t){var e=this.createObject(this.FUNCTION);return e.asyncFunc=t,this.setProperty(e,"length",this.createPrimitive(t.length),!0),e},Interpreter.prototype.getProperty=function(t,e){if(e=e.toString(),t!=this.UNDEFINED&&t!=this.NULL||this.throwException(this.TYPE_ERROR,"Cannot read property '"+e+"' of "+t),this.isa(t,this.STRING)){if("length"==e)return this.createPrimitive(t.data.length);var r=this.arrayIndex(e);if(!isNaN(r)&&r<t.data.length)return this.createPrimitive(t.data[r])}else if(this.isa(t,this.ARRAY)&&"length"==e)return this.createPrimitive(t.length);for(;;){if(t.properties&&e in t.properties)return t.properties[e];if(!(t.parent&&t.parent.properties&&t.parent.properties.prototype))break;t=t.parent.properties.prototype}return this.UNDEFINED},Interpreter.prototype.hasProperty=function(t,e){if(e=e.toString(),t.isPrimitive)throw TypeError("Primitive data type has no properties");if("length"==e&&(this.isa(t,this.STRING)||this.isa(t,this.ARRAY)))return!0;if(this.isa(t,this.STRING)){var r=this.arrayIndex(e);if(!isNaN(r)&&r<t.data.length)return!0}for(;;){if(t.properties&&e in t.properties)return!0;if(!(t.parent&&t.parent.properties&&t.parent.properties.prototype))break;t=t.parent.properties.prototype}return!1},Interpreter.prototype.setProperty=function(t,e,r,i,n){if(e=e.toString(),"object"!=typeof r)throw Error("Failure to wrap a value: "+r);if(t!=this.UNDEFINED&&t!=this.NULL||this.throwException(this.TYPE_ERROR,"Cannot set property '"+e+"' of "+t),!t.isPrimitive&&!t.fixed[e]){if(this.isa(t,this.STRING)){var o=this.arrayIndex(e);if("length"==e||!isNaN(o)&&o<t.data.length)return}if(this.isa(t,this.ARRAY)){var s;if("length"==e){var a=this.arrayIndex(r.toNumber());if(isNaN(a)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),a<t.length)for(s in t.properties)s=this.arrayIndex(s),!isNaN(s)&&a<=s&&delete t.properties[s];return void(t.length=a)}isNaN(s=this.arrayIndex(e))||(t.length=Math.max(t.length,s+1))}t.properties[e]=r,i&&(t.fixed[e]=!0),n&&(t.nonenumerable[e]=!0)}},Interpreter.prototype.deleteProperty=function(t,e){return e=e.toString(),!t.isPrimitive&&!t.fixed[e]&&(("length"!=e||!this.isa(t,this.ARRAY))&&delete t.properties[e])},Interpreter.prototype.getScope=function(){for(var t=0;t<this.stateStack.length;t++)if(this.stateStack[t].scope)return this.stateStack[t].scope;throw Error("No scope found.")},Interpreter.prototype.createScope=function(t,e){var r=this.createObject(null);if(r.parentScope=e,e||this.initGlobalScope(r),this.populateScope_(t,r),r.strict=!1,e&&e.strict)r.strict=!0;else{var i=t.body&&t.body[0];i&&i.expression&&"Literal"==i.expression.type&&"use strict"==i.expression.value&&(r.strict=!0)}return r},Interpreter.prototype.createSpecialScope=function(t,e){if(!t)throw Error("parentScope required");var r=e||this.createObject(null);return r.parentScope=t,r.strict=t.strict,r},Interpreter.prototype.getValueFromScope=function(t){for(var e=this.getScope(),r=t.toString();e;){if(r in e.properties)return e.properties[r];e=e.parentScope}return this.throwException(this.REFERENCE_ERROR,r+" is not defined"),this.UNDEFINED},Interpreter.prototype.setValueToScope=function(t,e){for(var r=this.getScope(),i=r.strict,n=t.toString();r;){if(n in r.properties||!i&&!r.parentScope)return void(r.fixed[n]||(r.properties[n]=e));r=r.parentScope}this.throwException(this.REFERENCE_ERROR,n+" is not defined")},Interpreter.prototype.populateScope_=function(t,e){function r(t){t.constructor==i.ast.constructor&&i.populateScope_(t,e)}if("VariableDeclaration"==t.type)for(s=0;s<t.declarations.length;s++)this.setProperty(e,t.declarations[s].id.name,this.UNDEFINED);else{if("FunctionDeclaration"==t.type)return void this.setProperty(e,t.id.name,this.createFunction(t,e));if("FunctionExpression"==t.type)return}var i=this;for(var n in t){var o=t[n];if(o&&"object"==typeof o)if("number"==typeof o.length&&o.splice)for(var s=0;s<o.length;s++)r(o[s]);else r(o)}},Interpreter.prototype.getValue=function(t){if(t.length){var e=t[0],r=t[1];return this.getProperty(e,r)}return this.getValueFromScope(t)},Interpreter.prototype.setValue=function(t,e){if(t.length){var r=t[0],i=t[1];this.setProperty(r,i,e)}else this.setValueToScope(t,e)},Interpreter.prototype.throwException=function(t,e){if(this.stateStack[0].interpreter)try{return void this.stateStack[0].interpreter.throwException(t,e)}catch(t){}if(void 0===e)r=t;else{var r=this.createObject(t);this.setProperty(r,"message",this.createPrimitive(e),!1,!0)}do{var i=this.stateStack.shift()}while(i&&"TryStatement"!==i.node.type);if(!i){throw this.isa(r,this.ERROR)?({EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError}[this.getProperty(r,"name")]||Error)(this.getProperty(r,"message")):r.toString()}this.stateStack.unshift({node:i.node.handler,throwValue:r})},Interpreter.prototype.stepArrayExpression=function(){var t=this.stateStack[0],e=t.node,r=t.n||0;t.array?this.setProperty(t.array,r-1,t.value):t.array=this.createObject(this.ARRAY),e.elements[r]?(t.n=r+1,this.stateStack.unshift({node:e.elements[r]})):(t.array.length=t.n||0,this.stateStack.shift(),this.stateStack[0].value=t.array)},Interpreter.prototype.stepAssignmentExpression=function(){var t=this.stateStack[0],e=t.node;if(t.doneLeft)if(t.doneRight){this.stateStack.shift();var r,i=t.leftSide,n=t.value;if("="==e.operator)r=n;else{var o=this.getValue(i),s=n,a=o.toNumber(),p=s.toNumber();if("+="==e.operator){var c,h;"string"==o.type||"string"==s.type?(c=o.toString(),h=s.toString()):(c=a,h=p),r=c+h}else if("-="==e.operator)r=a-p;else if("*="==e.operator)r=a*p;else if("/="==e.operator)r=a/p;else if("%="==e.operator)r=a%p;else if("<<="==e.operator)r=a<<p;else if(">>="==e.operator)r=a>>p;else if(">>>="==e.operator)r=a>>>p;else if("&="==e.operator)r=a&p;else if("^="==e.operator)r=a^p;else{if("|="!=e.operator)throw SyntaxError("Unknown assignment expression: "+e.operator);r=a|p}r=this.createPrimitive(r)}this.setValue(i,r),this.stateStack[0].value=r}else t.doneRight=!0,t.leftSide=t.value,this.stateStack.unshift({node:e.right});else t.doneLeft=!0,this.stateStack.unshift({node:e.left,components:!0})},Interpreter.prototype.stepBinaryExpression=function(){var t=this.stateStack[0],e=t.node;if(t.doneLeft)if(t.doneRight){this.stateStack.shift();var r,i=t.leftValue,n=t.value,o=this.comp(i,n);if("=="==e.operator||"!="==e.operator)r=i.isPrimitive&&n.isPrimitive?i.data==n.data:0===o,"!="==e.operator&&(r=!r);else if("==="==e.operator||"!=="==e.operator)r=i.isPrimitive&&n.isPrimitive?i.data===n.data:i===n,"!=="==e.operator&&(r=!r);else if(">"==e.operator)r=1==o;else if(">="==e.operator)r=1==o||0===o;else if("<"==e.operator)r=-1==o;else if("<="==e.operator)r=-1==o||0===o;else if("+"==e.operator){if("string"==i.type||"string"==n.type)var s=i.toString(),a=n.toString();else var s=i.toNumber(),a=n.toNumber();r=s+a}else if("in"==e.operator)r=this.hasProperty(n,i);else if("instanceof"==e.operator)this.isa(n,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"Expecting a function in instanceof check"),r=this.isa(i,n);else{var s=i.toNumber(),a=n.toNumber();if("-"==e.operator)r=s-a;else if("*"==e.operator)r=s*a;else if("/"==e.operator)r=s/a;else if("%"==e.operator)r=s%a;else if("&"==e.operator)r=s&a;else if("|"==e.operator)r=s|a;else if("^"==e.operator)r=s^a;else if("<<"==e.operator)r=s<<a;else if(">>"==e.operator)r=s>>a;else{if(">>>"!=e.operator)throw SyntaxError("Unknown binary operator: "+e.operator);r=s>>>a}}this.stateStack[0].value=this.createPrimitive(r)}else t.doneRight=!0,t.leftValue=t.value,this.stateStack.unshift({node:e.right});else t.doneLeft=!0,this.stateStack.unshift({node:e.left})},Interpreter.prototype.stepBlockStatement=function(){var t=this.stateStack[0],e=t.node,r=t.n_||0;e.body[r]?(t.done=!1,t.n_=r+1,this.stateStack.unshift({node:e.body[r]})):(t.done=!0,"Program"!=t.node.type&&this.stateStack.shift())},Interpreter.prototype.stepBreakStatement=function(){var t=this.stateStack.shift(),e=t.node,r=null;for(e.label&&(r=e.label.name),t=this.stateStack.shift();t&&"CallExpression"!=t.node.type&&"NewExpression"!=t.node.type;){if(r?r==t.label:t.isLoop||t.isSwitch)return;t=this.stateStack.shift()}throw SyntaxError("Illegal break statement")},Interpreter.prototype.stepCallExpression=function(){var t=this.stateStack[0],e=t.node;if(t.doneCallee_){if(t.func_){r=t.n_;t.arguments.length!=e.arguments.length&&(t.arguments[r-1]=t.value)}else{if("function"==t.value.type)t.func_=t.value;else if(t.value.length&&(t.member_=t.value[0]),t.func_=this.getValue(t.value),!t.func_||"function"!=t.func_.type)return void this.throwException(this.TYPE_ERROR,(t.value&&t.value.type)+" is not a function");"NewExpression"==t.node.type?(t.funcThis_=this.createObject(t.func_),t.isConstructor_=!0):t.value.length?t.funcThis_=t.value[0]:t.funcThis_=this.stateStack[this.stateStack.length-1].thisExpression,t.arguments=[];var r=0}if(e.arguments[r])t.n_=r+1,this.stateStack.unshift({node:e.arguments[r]});else if(t.doneExec)this.stateStack.shift(),t.isConstructor_&&"object"!==t.value.type?this.stateStack[0].value=t.funcThis_:this.stateStack[0].value=t.value;else{if(t.doneExec=!0,t.func_.node&&("FunctionApply_"==t.func_.node.type||"FunctionCall_"==t.func_.node.type)){if(t.funcThis_=t.arguments.shift(),"FunctionApply_"==t.func_.node.type)if((a=t.arguments.shift())&&this.isa(a,this.ARRAY)){t.arguments=[];for(n=0;n<a.length;n++)t.arguments[n]=this.getProperty(a,n)}else t.arguments=[];t.func_=t.member_}if(t.func_.node){for(var i=this.createScope(t.func_.node.body,t.func_.parentScope),n=0;n<t.func_.node.params.length;n++){var o=this.createPrimitive(t.func_.node.params[n].name),s=t.arguments.length>n?t.arguments[n]:this.UNDEFINED;this.setProperty(i,o,s)}for(var a=this.createObject(this.ARRAY),n=0;n<t.arguments.length;n++)this.setProperty(a,this.createPrimitive(n),t.arguments[n]);this.setProperty(i,"arguments",a);var p={node:t.func_.node.body,scope:i,thisExpression:t.funcThis_};this.stateStack.unshift(p),t.value=this.UNDEFINED}else if(t.func_.nativeFunc)t.value=t.func_.nativeFunc.apply(t.funcThis_,t.arguments);else{if(t.func_.asyncFunc){var c=this,h=t.arguments.concat(function(e){t.value=e||c.UNDEFINED,c.paused_=!1});return t.func_.asyncFunc.apply(t.funcThis_,h),void(this.paused_=!0)}if(!t.func_.eval)throw TypeError("function not a function (huh?)");var u=t.arguments[0];if(u)if(u.isPrimitive){var l=new Interpreter(u.toString());l.stateStack[0].scope.parentScope=this.getScope(),t={node:{type:"Eval_"},interpreter:l},this.stateStack.unshift(t)}else t.value=u;else t.value=this.UNDEFINED}}}else t.doneCallee_=!0,this.stateStack.unshift({node:e.callee,components:!0})},Interpreter.prototype.stepCatchClause=function(){var t=this.stateStack[0],e=t.node;if(t.doneBody)this.stateStack.shift();else{t.doneBody=!0;var r;if(e.param){r=this.createSpecialScope(this.getScope());var i=this.createPrimitive(e.param.name);this.setProperty(r,i,t.throwValue)}this.stateStack.unshift({node:e.body,scope:r})}},Interpreter.prototype.stepConditionalExpression=function(){var t=this.stateStack[0];t.done?(this.stateStack.shift(),"ConditionalExpression"==t.node.type&&(this.stateStack[0].value=t.value)):t.test?(t.done=!0,t.value.toBoolean()&&t.node.consequent?this.stateStack.unshift({node:t.node.consequent}):!t.value.toBoolean()&&t.node.alternate&&this.stateStack.unshift({node:t.node.alternate})):(t.test=!0,this.stateStack.unshift({node:t.node.test}))},Interpreter.prototype.stepContinueStatement=function(){var t=this.stateStack[0].node,e=null;t.label&&(e=t.label.name);for(var r=this.stateStack[0];r&&"CallExpression"!=r.node.type&&"NewExpression"!=r.node.type;){if(r.isLoop&&(!e||e==r.label))return;this.stateStack.shift(),r=this.stateStack[0]}throw SyntaxError("Illegal continue statement")},Interpreter.prototype.stepDoWhileStatement=function(){var t=this.stateStack[0];t.isLoop=!0,"DoWhileStatement"==t.node.type&&void 0===t.test&&(t.value=this.TRUE,t.test=!0),t.test?(t.test=!1,t.value.toBoolean()?t.node.body&&this.stateStack.unshift({node:t.node.body}):this.stateStack.shift()):(t.test=!0,this.stateStack.unshift({node:t.node.test}))},Interpreter.prototype.stepEmptyStatement=function(){this.stateStack.shift()},Interpreter.prototype.stepEval_=function(){var t=this.stateStack[0];t.interpreter.step()||(this.stateStack.shift(),this.stateStack[0].value=t.interpreter.value||this.UNDEFINED)},Interpreter.prototype.stepExpressionStatement=function(){var t=this.stateStack[0];t.done?(this.stateStack.shift(),this.value=t.value):(t.done=!0,this.stateStack.unshift({node:t.node.expression}))},Interpreter.prototype.stepForInStatement=function(){var t=this.stateStack[0];t.isLoop=!0;var e=t.node;if(t.doneVariable_)if(t.doneObject_){void 0===t.iterator&&(t.object=t.value,t.iterator=0);var r=null;t:do{var i=t.iterator;for(var n in t.object.properties)if(!(n in t.object.nonenumerable)){if(0==i){r=n;break t}i--}t.object=t.object.parent&&t.object.parent.properties.prototype,t.iterator=0}while(t.object);t.iterator++,null===r?this.stateStack.shift():(this.setValueToScope(t.variable,this.createPrimitive(r)),e.body&&this.stateStack.unshift({node:e.body}))}else t.doneObject_=!0,t.variable=t.value,this.stateStack.unshift({node:e.right});else{t.doneVariable_=!0;var o=e.left;"VariableDeclaration"==o.type&&(o=o.declarations[0].id),this.stateStack.unshift({node:o,components:!0})}},Interpreter.prototype.stepForStatement=function(){var t=this.stateStack[0];t.isLoop=!0;var e=t.node,r=t.mode||0;0==r?(t.mode=1,e.init&&this.stateStack.unshift({node:e.init})):1==r?(t.mode=2,e.test&&this.stateStack.unshift({node:e.test})):2==r?(t.mode=3,e.test&&t.value&&!t.value.toBoolean()?this.stateStack.shift():e.body&&this.stateStack.unshift({node:e.body})):3==r&&(t.mode=1,e.update&&this.stateStack.unshift({node:e.update}))},Interpreter.prototype.stepFunctionDeclaration=function(){this.stateStack.shift()},Interpreter.prototype.stepFunctionExpression=function(){var t=this.stateStack.shift();this.stateStack[0].value=this.createFunction(t.node)},Interpreter.prototype.stepIdentifier=function(){var t=this.stateStack.shift(),e=this.createPrimitive(t.node.name);this.stateStack[0].value=t.components?e:this.getValueFromScope(e)},Interpreter.prototype.stepIfStatement=Interpreter.prototype.stepConditionalExpression,Interpreter.prototype.stepLabeledStatement=function(){var t=this.stateStack.shift();this.stateStack.unshift({node:t.node.body,label:t.node.label.name})},Interpreter.prototype.stepLiteral=function(){var t=this.stateStack.shift();this.stateStack[0].value=this.createPrimitive(t.node.value)},Interpreter.prototype.stepLogicalExpression=function(){var t=this.stateStack[0],e=t.node;if("&&"!=e.operator&&"||"!=e.operator)throw SyntaxError("Unknown logical operator: "+e.operator);t.doneLeft_?t.doneRight_?(this.stateStack.shift(),this.stateStack[0].value=t.value):"&&"==e.operator&&!t.value.toBoolean()||"||"==e.operator&&t.value.toBoolean()?(this.stateStack.shift(),this.stateStack[0].value=t.value):(t.doneRight_=!0,this.stateStack.unshift({node:e.right})):(t.doneLeft_=!0,this.stateStack.unshift({node:e.left}))},Interpreter.prototype.stepMemberExpression=function(){var t=this.stateStack[0],e=t.node;t.doneObject_?t.doneProperty_?(this.stateStack.shift(),t.components?this.stateStack[0].value=[t.object,t.value]:this.stateStack[0].value=this.getProperty(t.object,t.value)):(t.doneProperty_=!0,t.object=t.value,this.stateStack.unshift({node:e.property,components:!e.computed})):(t.doneObject_=!0,this.stateStack.unshift({node:e.object}))},Interpreter.prototype.stepNewExpression=Interpreter.prototype.stepCallExpression,Interpreter.prototype.stepObjectExpression=function(){var t=this.stateStack[0],e=t.node,r=t.valueToggle,i=t.n||0;t.object?r?t.key=t.value:this.setProperty(t.object,t.key,t.value):t.object=this.createObject(this.OBJECT),e.properties[i]?(r?(t.n=i+1,this.stateStack.unshift({node:e.properties[i].value})):this.stateStack.unshift({node:e.properties[i].key,components:!0}),t.valueToggle=!r):(this.stateStack.shift(),this.stateStack[0].value=t.object)},Interpreter.prototype.stepProgram=Interpreter.prototype.stepBlockStatement,Interpreter.prototype.stepReturnStatement=function(){var t=this.stateStack[0],e=t.node;if(e.argument&&!t.done)t.done=!0,this.stateStack.unshift({node:e.argument});else{var r=t.value||this.UNDEFINED;do{if(this.stateStack.shift(),0==this.stateStack.length)throw SyntaxError("Illegal return statement");t=this.stateStack[0]}while("CallExpression"!=t.node.type&&"NewExpression"!=t.node.type);t.value=r}},Interpreter.prototype.stepSequenceExpression=function(){var t=this.stateStack[0],e=t.node,r=t.n||0;e.expressions[r]?(t.n=r+1,this.stateStack.unshift({node:e.expressions[r]})):(this.stateStack.shift(),this.stateStack[0].value=t.value)},Interpreter.prototype.stepSwitchStatement=function(){var t=this.stateStack[0];if(t.checked=t.checked||[],t.isSwitch=!0,t.test){t.switchValue||(t.switchValue=t.value);var e=t.index||0,r=t.node.cases[e];if(r)if(t.done||t.checked[e]||!r.test){if(t.done||!r.test||0==this.comp(t.value,t.switchValue)){t.done=!0;var i=t.n||0;if(r.consequent[i])return this.stateStack.unshift({node:r.consequent[i]}),void(t.n=i+1)}t.n=0,t.index=e+1}else t.checked[e]=!0,this.stateStack.unshift({node:r.test});else this.stateStack.shift()}else t.test=!0,this.stateStack.unshift({node:t.node.discriminant})},Interpreter.prototype.stepThisExpression=function(){this.stateStack.shift();for(var t=0;t<this.stateStack.length;t++)if(this.stateStack[t].thisExpression)return void(this.stateStack[0].value=this.stateStack[t].thisExpression);throw Error("No this expression found.")},Interpreter.prototype.stepThrowStatement=function(){var t=this.stateStack[0],e=t.node;t.argument?this.throwException(t.value):(t.argument=!0,this.stateStack.unshift({node:e.argument}))},Interpreter.prototype.stepTryStatement=function(){var t=this.stateStack[0],e=t.node;t.doneBlock?!t.doneFinalizer&&e.finalizer?(t.doneFinalizer=!0,this.stateStack.unshift({node:e.finalizer})):this.stateStack.shift():(t.doneBlock=!0,this.stateStack.unshift({node:e.block}))},Interpreter.prototype.stepUnaryExpression=function(){var t=this.stateStack[0],e=t.node;if(t.done){this.stateStack.shift();var r;if("-"==e.operator)r=-t.value.toNumber();else if("+"==e.operator)r=t.value.toNumber();else if("!"==e.operator)r=!t.value.toBoolean();else if("~"==e.operator)r=~t.value.toNumber();else if("typeof"==e.operator)r=t.value.type;else if("delete"==e.operator){if(t.value.length)var i=t.value[0],n=t.value[1];else var i=this.getScope(),n=t.value;r=this.deleteProperty(i,n)}else{if("void"!=e.operator)throw SyntaxError("Unknown unary operator: "+e.operator);r=void 0}this.stateStack[0].value=this.createPrimitive(r)}else{t.done=!0;var o={node:e.argument};"delete"==e.operator&&(o.components=!0),this.stateStack.unshift(o)}},Interpreter.prototype.stepUpdateExpression=function(){var t=this.stateStack[0],e=t.node;if(t.done){this.stateStack.shift();var r,i=t.value,n=this.getValue(i).toNumber();if("++"==e.operator)r=this.createPrimitive(n+1);else{if("--"!=e.operator)throw SyntaxError("Unknown update expression: "+e.operator);r=this.createPrimitive(n-1)}this.setValue(i,r),this.stateStack[0].value=e.prefix?r:this.createPrimitive(n)}else t.done=!0,this.stateStack.unshift({node:e.argument,components:!0})},Interpreter.prototype.stepVariableDeclaration=function(){var t=this.stateStack[0],e=t.node,r=t.n||0;e.declarations[r]?(t.n=r+1,this.stateStack.unshift({node:e.declarations[r]})):this.stateStack.shift()},Interpreter.prototype.stepVariableDeclarator=function(){var t=this.stateStack[0],e=t.node;if(e.init&&!t.done)t.done=!0,this.stateStack.unshift({node:e.init});else{if(!this.hasProperty(this,e.id.name)||e.init){var r=e.init?t.value:this.UNDEFINED;this.setValue(this.createPrimitive(e.id.name),r)}this.stateStack.shift()}},Interpreter.prototype.stepWithStatement=function(){var t=this.stateStack[0],e=t.node;if(t.doneObject)if(t.doneBody)this.stateStack.shift();else{t.doneBody=!0;var r=this.createSpecialScope(this.getScope(),t.value);this.stateStack.unshift({node:e.body,scope:r})}else t.doneObject=!0,this.stateStack.unshift({node:e.object})},Interpreter.prototype.stepWhileStatement=Interpreter.prototype.stepDoWhileStatement,this.Interpreter=Interpreter,Interpreter.prototype.appendCode=Interpreter.prototype.appendCode,Interpreter.prototype.step=Interpreter.prototype.step,Interpreter.prototype.run=Interpreter.prototype.run;
//# sourceMappingURL=../maps/acorn.min.js.map
